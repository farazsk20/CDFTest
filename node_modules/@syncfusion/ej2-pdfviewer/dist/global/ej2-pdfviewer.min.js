/*!
*  filename: ej2-pdfviewer.min.js
*  version : 16.4.55
*  Copyright Syncfusion Inc. 2001 - 2019. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
this.ej=this.ej||{},this.ej.pdfviewer=function(e,t,i,n,o,r,s){"use strict";var a=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds,o=e.linkAnnotation,r=e.linkPage,s=e.annotationLocation;i.length>0&&n.length>0&&this.renderWebLink(i,n,t),o.length>0&&r.length>0&&this.renderDocumentLink(o,r,s,t)}},e.prototype.renderWebLink=function(e,i,n){for(var o=this,r=this,s=0;s<e.length;s++)!function(s){var a=t.createElement("a",{id:"weblinkdiv_"+s}),l=i[s];(a=r.setHyperlinkProperties(a,l)).title=e[s],a.setAttribute("href",e[s]),"CurrentTab"===r.pdfViewer.hyperlinkOpenState?(a.target="_self",a.onclick=function(){o.pdfViewer.fireHyperlinkClick(e[s])}):"NewTab"===r.pdfViewer.hyperlinkOpenState?(a.target="_blank",a.onclick=function(){o.pdfViewer.fireHyperlinkClick(e[s])}):"NewWindow"===r.pdfViewer.hyperlinkOpenState&&(a.onclick=function(){return o.pdfViewer.fireHyperlinkClick(e[s]),window.open(e[s],"_blank","scrollbars=yes,resizable=yes"),!1}),document.getElementById(r.pdfViewer.element.id+"_pageDiv_"+n).appendChild(a)}(s)},e.prototype.renderDocumentLink=function(e,i,n,o){for(var r=this,s=this,a=0;a<e.length;a++)!function(a){var l=t.createElement("a",{id:"linkdiv_"+a}),h=e[a];if((l=s.setHyperlinkProperties(l,h)).setAttribute("href",""),void 0!==i[a]&&i[a]>0){var d=s.pdfViewerBase.pageSize[o].height,p=void 0,c=void 0;0!==n.length?(p=n[a],c=s.pdfViewerBase.pageSize[i[a]].top*s.pdfViewerBase.getZoomFactor()+(d-p)*s.pdfViewerBase.getZoomFactor()):c=s.pdfViewerBase.pageSize[i[a]].top*s.pdfViewerBase.getZoomFactor(),void 0!==c&&(l.name=c.toString(),l.onclick=function(){return r.pdfViewerBase.viewerContainer.scrollTop=parseInt(l.name),!1})}document.getElementById(s.pdfViewer.element.id+"_pageDiv_"+o).appendChild(l)}(a)},e.prototype.setHyperlinkProperties=function(e,t){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",e},e.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0)for(var i=this.pdfViewerBase.getElement("_pageDiv_"+e).childNodes,n=0;n<i.length;n++){var o=i[n];"A"===o.tagName&&(t?o.classList.add("e-pv-onselection"):o.classList.remove("e-pv-onselection"))}},e.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},e.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},e.prototype.getModuleName=function(){return"LinkAnnotation"},e}(),l=function(){function e(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.isNavigationPaneResized=!1,this.resizeIconMouseOver=function(e){e.srcElement.style.cursor="default"},this.resizePanelMouseDown=function(e){var t=i;t.offset=[t.sideBarResizer.offsetLeft-e.clientX,t.sideBarResizer.offsetTop-e.clientY],t.isDown=!0,t.isNavigationPaneResized=!0,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.sideBarContentContainer&&(t.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(e){var t=i;t.isDown=!1,t.isNavigationPaneResized&&t.sideBarContentContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.sideBarContentContainer.style.cursor="default",t.isNavigationPaneResized=!1)},this.resizePanelMouseMove=function(e){var t=i;if(e.preventDefault(),t.isDown&&i.sideBarContentContainer){var n=e.clientX+t.offset[0],o=Math.floor(i.outerContainerWidth/2);n>o&&(n=o),n<i.thumbnailWidthMin&&(n=i.thumbnailWidthMin),t.sideBarResizer.style.left=n+"px",t.closeDiv.style.left=n-t.contentContainerScrollWidth+"px",t.sideBarContentContainer.style.width=n+"px",t.sideBarContent.style.width=n+"px",t.sideBarContentSplitter.style.width=n+"px",t.sideBarTitleContainer.style.width=n+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerLeft()+"px";var r=t.pdfViewer.element.clientWidth-t.getViewerContainerLeft();t.pdfViewerBase.viewerContainer.style.width=r+"px",t.pdfViewerBase.pageContainer.style.width=t.pdfViewerBase.viewerContainer.clientWidth+"px",t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.pdfViewerBase.updateZoomValue()}},this.sideToolbarOnClose=function(e){var t=i;t.removeThumbnailSelectionIconTheme(),t.removeBookmarkSelectionIconTheme(),t.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(e){i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails");var t=i,n=document.getElementById(i.pdfViewer.element.id+"_bookmark_view");n&&(t.removeBookmarkSelectionIconTheme(),n.style.display="none"),document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="flex",t.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?t.isBookmarkOpen?(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(t.isThumbnailOpen=!1,t.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),t.isBookmarkOpen=!1},this.bookmarkButtonOnClick=function(e){var t=i;document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="none",i.removeThumbnailSelectionIconTheme(),i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Bookmarks"),i.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),i.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?i.isThumbnailOpen?(i.setBookmarkSelectionIconTheme(),i.isBookmarkOpen=!0,i.updateViewerContainerOnExpand()):(i.removeBookmarkSelectionIconTheme(),i.isBookmarkOpen=!1,i.updateViewerContainerOnClose()):(i.setBookmarkSelectionIconTheme(),i.isBookmarkOpen=!0,i.updateViewerContainerOnExpand())),i.isThumbnailOpen=!1},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.initializeNavigationPane=function(){this.sideBarToolbar=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarToolbar",className:"e-pv-sidebar-toolbar"}),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);var e=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarToolbarSplitter",className:"e-pv-sidebar-toolbar-splitter"});this.pdfViewerBase.mainContainer.appendChild(e),this.sideBarContentContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContentContainer",className:"e-pv-sidebar-content-container"}),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.sideBarContentSplitter=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContentSplitter",className:"e-pv-sidebar-content-splitter"}),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.sideBarContent=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarContent",className:"e-pv-sidebar-content"}),this.sideBarContentContainer.appendChild(this.sideBarContent),this.sideBarTitleContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarTitleContainer",className:"e-pv-sidebar-title-container"}),this.sideBarTitle=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarTitle",className:"e-pv-sidebar-title"}),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer=t.createElement("div",{id:this.pdfViewer.element.id+"_sideBarResizer",className:"e-pv-sidebar-resizer"}),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.sideBarContentContainer.appendChild(this.sideBarResizer);var i=this.getViewerContainerLeft();this.pdfViewerBase.viewerContainer.style.left=i+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-i+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},e.prototype.createSidebarToolBar=function(){this.thumbnailButton=t.createElement("button",{id:this.pdfViewer.element.id+"_thumbnail-view",attrs:{disabled:"disabled"}}),this.thumbnailButton.className="e-pv-tbar-btn e-pv-thumbnail-view-button e-btn";var e=t.createElement("span",{id:this.pdfViewer.element.id+"_thumbnail-view_icon",className:"e-pv-thumbnail-view-disable-icon e-pv-icon"});this.thumbnailButton.appendChild(e),new i.Tooltip({content:this.pdfViewer.localeObj.getConstant("Page Thumbnails"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.thumbnailButton),this.bookmarkButton=t.createElement("button",{id:this.pdfViewer.element.id+"_bookmark",attrs:{disabled:"disabled"}}),this.bookmarkButton.className="e-pv-tbar-btn e-pv-bookmark-button e-btn";var n=t.createElement("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-disable-icon e-pv-icon"});this.bookmarkButton.appendChild(n),new i.Tooltip({content:this.pdfViewer.localeObj.getConstant("Bookmarks"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.bookmarkButton),this.sideBarToolbar.appendChild(this.thumbnailButton),this.sideBarToolbar.appendChild(this.bookmarkButton),this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},e.prototype.enableBookmarkButton=function(){this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},e.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=t.createElement("button",{id:this.pdfViewer.element.id+"_close_btn"}),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.closeDiv.style.left=this.closeButtonLeft+"px";var e=t.createElement("span",{id:this.pdfViewer.element.id+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},e.prototype.createResizeIcon=function(){var e=t.createElement("div",{id:this.pdfViewer.element.id+"_resize",className:"e-pv-resize-icon e-pv-icon"});e.style.top=this.sideBarToolbar.clientHeight/2+"px",e.style.position="absolute",e.addEventListener("click",this.sideToolbarOnClose),e.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(e)},Object.defineProperty(e.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),e.prototype.updateViewerContainerOnClose=function(){var e=this;e.sideBarContentContainer&&(e.sideBarContentContainer.style.display="none",e.pdfViewerBase.viewerContainer.style.left=e.sideToolbarWidth+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-e.sideToolbarWidth+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.clientWidth+"px",e.pdfViewerBase.updateZoomValue())},e.prototype.updateViewerContainerOnExpand=function(){var e=this;e.sideBarContentContainer&&(e.sideBarContentContainer.style.display="block",e.pdfViewerBase.viewerContainer.style.left=e.getViewerContainerLeft()+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-this.getViewerContainerLeft()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1))},e.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth+this.sideBarContentContainerWidth},e.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},e.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},e.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},e.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},e.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},e.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},e.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},e.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},e.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},e.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},e.prototype.clear=function(){this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme()},e.prototype.getModuleName=function(){return"NavigationPane"},e}(),h=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,a)}l((n=n.apply(e,t||[])).next())})},d=function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},p=function(){function e(e){var t=this;this.pageSize=[],this.pageCount=0,this.currentPageNumber=0,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.touchClientX=0,this.touchClientY=0,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.onWindowResize=function(){var e=t;e.viewerContainer.style.left=(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerContainerLeft():0)+"px";var i=e.pdfViewer.element.clientWidth-(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerContainerLeft():0);e.viewerContainer.style.width=i+"px",e.pdfViewer.toolbarModule?e.viewerContainer.style.height=e.updatePageHeight(e.pdfViewer.element.getBoundingClientRect().height,56):e.viewerContainer.style.height=e.updatePageHeight(e.pdfViewer.element.getBoundingClientRect().height,0),e.pageContainer.style.width=e.viewerContainer.clientWidth+"px",e.pdfViewer.toolbarModule&&e.pdfViewer.toolbarModule.onToolbarResize(e.navigationPane.sideBarToolbar?e.navigationPane.getViewerMainContainerWidth():e.pdfViewer.element.clientWidth),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.currentPageNumber-1),e.pdfViewer.textSearchModule&&e.pdfViewer.textSearchModule.textSearchBoxOnResize(),e.updateZoomValue()},this.viewerContainerOnMousedown=function(e){if(0===e.button){t.isViewerMouseDown=!0,1===e.detail&&t.focusViewerContainer(),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=e.clientX,t.mouseY=e.clientY;var i=!!document.documentMode;!t.pdfViewer.textSelectionModule||t.isClickedOnScrollBar(e)||t.isTextSelectionDisabled||(i||e.preventDefault(),t.pdfViewer.textSelectionModule.clearTextSelection())}t.isPanMode&&(t.dragX=e.pageX,t.dragY=e.pageY,t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing"))},this.viewerContainerOnMouseup=function(e){if(t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber)),0===e.button){var i=e.target;if(i.classList.contains("e-pv-page-canvas")){var n=i.id.split("_");t.pdfViewer.firePageClick(e.offsetX,e.offsetY,parseInt(n[n.length-1])+1)}t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1},this.viewerContainerOnMouseWheel=function(e){t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&e.preventDefault(),t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.viewerContainerOnKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),n=!!i&&e.metaKey;if(e.ctrlKey||n){if(e.shiftKey&&!i||i&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1)}switch(e.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&(e.preventDefault(),t.pdfViewer.textSelectionModule.copyText());break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(e.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler())}}t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e)},this.viewerContainerOnMousemove=function(e){t.mouseX=e.clientX,t.mouseY=e.clientY;var i=!!document.documentMode;if(t.isViewerMouseDown)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled)if(i){var n=window.getSelection();n.type||n.isCollapsed||null===n.anchorNode||(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else e.preventDefault(),t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,t.mouseX,t.mouseY);else e.preventDefault();t.isPanMode&&t.panOnMouseMove(e)},this.panOnMouseMove=function(e){if(t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer)if(t.isViewerMouseDown){var i=t.dragX-e.pageX,n=t.dragY-e.pageY;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+n,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+i,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=e.pageX,t.dragY=e.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(e){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e)},this.viewerContainerOnMouseEnter=function(e){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(e){var i=!!document.documentMode;t.isViewerMouseDown&&(i||e.preventDefault())},this.viewerContainerOnClick=function(e){"dblclick"===e.type?t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&e.target.classList.contains("e-pv-text")&&(t.isViewerContainerDoubleClick=!0,t.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout(function(){t.applySelection()},100)):3===e.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.selectEntireLine(e),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.applySelection()))},this.viewerContainerOnDragStart=function(e){!!document.documentMode||e.preventDefault()},this.viewerContainerOnContextMenuClick=function(e){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){return 0===e.button?t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(1!==e.detail||t.viewerContainer.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(),t.viewerContainer.contains(e.target)&&(t.isClickedOnScrollBar(e)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup())):2===e.button&&t.viewerContainer.contains(e.target)&&window.getSelection().removeAllRanges(),!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)},this.onWindowTouchEnd=function(e){t.pdfViewer.element.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(e){var i=e.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i[0].clientX,i[0].clientY),1===i.length&&t.preventTouchEvent(e),t.touchClientX=i[0].clientX,t.touchClientY=i[0].clientY,1!==i.length||e.target.classList.contains("e-pv-touch-select-drop")||e.target.classList.contains("e-pv-touch-ellipse")||t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.contextMenuObj.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout(function(){t.viewerContainerOnLongTouch(e)},1e3)),t.isLongTouchPropagated=!0)},this.viewerContainerOnLongTouch=function(e){t.touchClientX=e.touches[0].clientX,t.touchClientY=e.touches[0].clientY,e.preventDefault(),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.initiateTouchSelection(e,t.touchClientX,t.touchClientY)},this.viewerContainerOnPointerDown=function(e){"touch"===e.pointerType&&++t.pointerCount<=2&&(e.preventDefault(),t.pointersForTouch.push(e),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY))},this.viewerContainerOnTouchMove=function(e){t.preventTouchEvent(e);var i=e.touches;t.pdfViewer.magnificationModule&&(i.length>1&&t.pageCount>0?t.pdfViewer.magnificationModule.initiatePinchMove(i[0].clientX,i[0].clientY,i[1].clientX,i[1].clientY):1===i.length&&t.getPagesPinchZoomed()&&t.pdfViewer.magnificationModule.pinchMoveScroll()),i=null},this.viewerContainerOnPointerMove=function(e){if("touch"===e.pointerType&&t.pageCount>0&&(e.preventDefault(),2===t.pointersForTouch.length)){for(var i=0;i<t.pointersForTouch.length;i++)if(e.pointerId===t.pointersForTouch[i].pointerId){t.pointersForTouch[i]=e;break}t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(e){t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null},this.viewerContainerOnPointerEnd=function(e){"touch"===e.pointerType&&(e.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(){var e=t;t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var i=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.contextMenuObj.close();for(var n=t.viewerContainer.scrollTop,o=0;o<t.pageCount;o++)if(null!=t.pageSize[o]){var r=t.getPageHeight(o);if(n+t.pageStopValue<=t.getPageTop(o)+r){t.currentPageNumber=o+1;break}}t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&(t.pdfViewer.toolbarModule.updateCurrentPage(t.currentPageNumber),t.pdfViewer.toolbarModule.updateNavigationButtons()),i!==t.currentPageNumber&&(e.pdfViewer.thumbnailViewModule&&(e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.currentPageNumber-1),e.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(i)),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1);var s=t.getElement("_pageDiv_"+(t.currentPageNumber-1));s&&(s.style.visibility="visible"),t.isViewerMouseDown&&(t.getRerenderCanvasCreated()&&t.pdfViewer.magnificationModule.clearIntervalTimer(),t.scrollHoldTimer=setTimeout(function(){t.initiatePageViewScrollChanged()},100))},this.pdfViewer=e,this.navigationPane=new l(this.pdfViewer,this),this.textLayer=new c(this.pdfViewer,this)}return e.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){var n=void 0;this.viewerMainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container"}),this.viewerContainer.tabIndex=0,e.style.touchAction="pan-x pan-y",e.style.minHeight="500px",this.mainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.pdfViewer.toolbarModule&&(this.navigationPane.initializeNavigationPane(),n=this.pdfViewer.toolbarModule.intializeToolbar("100%")),this.viewerContainer.style.height=n?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,56):this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var o=this.pdfViewer.element.clientWidth-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0);this.viewerContainer.style.width=o+"px",this.viewerMainContainer.appendChild(this.viewerContainer),this.pageContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container"}),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",n&&this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),this.waitingPopup=t.createElement("div",{id:this.pdfViewer.element.id+"_loadingIndicator"}),this.viewerContainer.appendChild(this.waitingPopup),i.createSpinner({target:this.waitingPopup,cssClass:"e-spin-center"}),this.setLoaderProperties(this.waitingPopup),this.contextMenuModule=new u(this.pdfViewer,this),this.contextMenuModule.createContextMenu(),this.wireEvents(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&this.pdfViewer.load(this.pdfViewer.documentPath,null)}},e.prototype.initiatePageRender=function(e,t){this.documentId=this.createGUID(),this.viewerContainer.scrollTop=0,this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),e=this.checkDocumentData(e),this.setFileName();var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},e.prototype.createAjaxRequest=function(e,t,i){var n=this,o=new XMLHttpRequest;o.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.responseType="json",o.send(JSON.stringify(e)),o.onreadystatechange=function(e){if(4===o.readyState&&200===o.status){var r=e.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),n.requestSuccess(r,t,i)}else 4===o.readyState&&400===o.status&&n.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)},o.onerror=function(e){n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)}},e.prototype.openNotificationPopup=function(){this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error")),this.getElement("_notify").classList.add("e-pv-notification-large-content")},e.prototype.requestSuccess=function(e,t,i){e&&void 0!==e.pageCount?(this.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.saveDocumentHashData(),this.pageRender(e)):(this.pageCount=0,this.currentPageNumber=0,4===e?this.renderPasswordPopup(t,i):3===e&&this.renderCorruptPopup(),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems()),this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks()},e.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide();if(this.initPageDiv(e),this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0,-1===this.renderedPagesList.indexOf(0)){this.createRequestForRender(0);var t=1;if(this.pageSize[t])for(var i=this.getPageTop(t),n=this.viewerContainer.clientHeight;n>i&&this.pageSize[t];)this.renderPageElement(t),this.createRequestForRender(t),i=this.getPageTop(t),t+=1}this.showLoadingIndicator(!1),this.currentPageNumber=1,this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems())},e.prototype.renderPasswordPopup=function(e,t){this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},e.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.createCorruptedPopup(),this.documentId=null,this.corruptPopup.show()},e.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,i={document:e,password:t,zoomFactor:1,isFileName:this.isFileName}):(this.isPasswordAvailable=!1,i={document:e,zoomFactor:1,isFileName:this.isFileName}),i},e.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t&&(this.isFileName=!0,null===this.pdfViewer.fileName)){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],t=e}return t},e.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&null!==this.pdfViewer.toolbarModule.uploadedDocumentName?this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName:this.pdfViewer.fileName="undefined.pdf")},e.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},e.prototype.saveDocumentHashData=function(){window.sessionStorage.setItem("hashId",this.hashId),window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},e.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}},e.prototype.createWaitingPopup=function(e){this.waitingPopup=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e),this.waitingPopup&&(i.createSpinner({target:this.waitingPopup}),this.setLoaderProperties(this.waitingPopup))},e.prototype.showLoadingIndicator=function(e){this.waitingPopup=this.getElement("_loadingIndicator"),null!=this.waitingPopup&&(e?i.showSpinner(this.waitingPopup):i.hideSpinner(this.waitingPopup))},e.prototype.showPageLoadingIndicator=function(e,t){this.waitingPopup=this.getElement("_pageDiv_"+e),null!=this.waitingPopup&&(t?i.showSpinner(this.waitingPopup):i.hideSpinner(this.waitingPopup),this.updateWaitingPopup(e))},e.prototype.showPrintLoadingIndicator=function(e){this.printWaitingPopup=this.getElement("_printLoadingIndicator"),null!=this.printWaitingPopup&&(e?(this.printMainContainer.style.display="block",i.showSpinner(this.printWaitingPopup)):(this.printMainContainer.style.display="none",i.hideSpinner(this.printWaitingPopup)))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px"},e.prototype.updateScrollTop=function(e){null!=this.pageSize[e]&&(this.viewerContainer.scrollTop=this.getPageTop(e),this.renderElementsVirtualScroll(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e))},e.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},e.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},e.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},e.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},e.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},e.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},e.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},e.prototype.clear=function(e){for(this.isPasswordAvailable=!1,this.isDocumentLoaded=!1,this.initiateTextSelectMode(),this.navigationPane.sideBarToolbar&&this.navigationPane.clear(),this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.clear(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.clear(),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.clearIntervalTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.resetTextSearch(),this.pageSize&&(this.pageSize=[]),this.renderedPagesList&&(this.renderedPagesList=[]);this.pageContainer.hasChildNodes();)this.pageContainer.removeChild(this.pageContainer.lastChild);this.pageCount>0&&this.unloadDocument(null),this.windowSessionStorageClear(),this.pinchZoomStorage&&(this.pinchZoomStorage=[]),e&&this.pageCount>0&&this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},e.prototype.destroy=function(){this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.pdfViewer.thumbnailViewModule&&this.pdfViewer.thumbnailViewModule.clear(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.clear()},e.prototype.unloadDocument=function(e){var t=this,i=window.sessionStorage.getItem("hashId"),n=window.sessionStorage.getItem("documentLiveCount");if(null!==i){var o={hashId:i,documentLiveCount:n},r=new XMLHttpRequest;r.open("POST",window.sessionStorage.getItem("serviceURL")+"/"+window.sessionStorage.getItem("unload"),!1),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(o)),r.onreadystatechange=function(e){4===r.readyState&&400===r.status&&t.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText)},r.onerror=function(e){t.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText)}}window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount")},e.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload"),this.sessionStorage.forEach(function(e){window.sessionStorage.removeItem(e)})},e.prototype.focusViewerContainer=function(){var e=window.scrollX,t=window.scrollY,i=this.getScrollParent(this.viewerContainer),n=0,o=0;null!==i&&(n=i.scrollLeft,o=i.scrollTop),this.viewerContainer.focus(),-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge")&&null!=i?(i.scrollLeft=n,i.scrollTop=o):null!==i&&i.scrollTo(n,o),window.scrollTo(e,t)},e.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},e.prototype.createCorruptedPopup=function(){var e=this,n=t.createElement("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(n),this.corruptPopup=new i.Dialog({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",content:'<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null,e.waitingPopup=e.getElement("_loadingIndicator"),null!=e.waitingPopup&&i.hideSpinner(e.waitingPopup)}}),this.corruptPopup.appendTo(n)},e.prototype.closeCorruptPopup=function(){this.corruptPopup.hide(),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&i.hideSpinner(this.waitingPopup)},e.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none",this.printWaitingPopup=t.createElement("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"}),this.printMainContainer.appendChild(this.printWaitingPopup),i.createSpinner({target:this.printWaitingPopup,cssClass:"e-spin-center"}),this.setLoaderProperties(this.printWaitingPopup)},e.prototype.createPasswordPopup=function(){var e=this,n=t.createElement("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup"});this.promptElement=t.createElement("span",{id:this.pdfViewer.element.id+"_prompt"}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),n.appendChild(this.promptElement);var o=t.createElement("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=t.createElement("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",o.appendChild(this.passwordInput),n.appendChild(o),this.pageContainer.appendChild(n),this.passwordPopup=new i.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}],close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null,e.waitingPopup=e.getElement("_loadingIndicator"),null!=e.waitingPopup&&i.hideSpinner(e.waitingPopup)}}),this.passwordPopup.appendTo(n),this.passwordInput.addEventListener("keyup",function(){""===e.passwordInput.value&&e.passwordDialogReset()}),this.passwordInput.addEventListener("focus",function(){e.passwordInput.parentElement.classList.add("e-input-focus")}),this.passwordInput.addEventListener("blur",function(){e.passwordInput.parentElement.classList.remove("e-input-focus")})},e.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value=""),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&i.hideSpinner(this.waitingPopup)},e.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide(),this.waitingPopup=this.getElement("_loadingIndicator"),null!==this.waitingPopup&&i.hideSpinner(this.waitingPopup)},e.prototype.passwordDialogReset=function(){this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},e.prototype.applyPassword=function(){var e=this.passwordInput.value;""!==e&&this.pdfViewer.load(this.document,e),this.focusViewerContainer()},e.prototype.wireEvents=function(){this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),window.addEventListener("unload",this.unloadDocument),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unloadDocument),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"fitToWidth"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToWidth());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},e.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode()},e.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode())},e.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},e.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||(e.preventDefault(),e.stopPropagation()))},e.prototype.initPageDiv=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateTotalPage(),this.pageCount>0){var t=0,i=0;this.pageCount>100?(i=100,this.pageLimit=i):i=this.pageCount;for(a=0;a<i;a++){var n=e.pageSizes[a].split(",");if(null!==e.pageSizes[a-1]&&0!==a){var o=e.pageSizes[a-1].split(",");t=this.pageGap+parseFloat(o[1])+t}else t=this.pageGap;var r={width:parseFloat(n[0]),height:parseFloat(n[1]),top:t};this.pageSize.push(r)}for(var s=this.pageCount<10?this.pageCount:10,a=0;a<s;a++)this.renderPageContainer(a,this.getPageWidth(a),this.getPageHeight(a),this.getPageTop(a));this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit&&null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}},e.prototype.renderElementsVirtualScroll=function(e){var t=e+1;t>this.pageCount&&(t=this.pageCount);for(n=e-1;n<=t;n++)-1!==n&&this.renderPageElement(n);var i=e-3;i<0&&(i=0);for(var n=e-1;n>=i;n--)-1!==n&&this.renderPageElement(n);for(var o=0;o<this.pageCount;o++)if(!(i<=o&&o<=t)){var r=this.getElement("_pageDiv_"+o),s=this.getElement("_pageCanvas_"+o),a=this.getElement("_textLayer_"+o);if(s&&(s.parentNode.removeChild(s),a&&(this.pdfViewer.textSelectionModule&&0!==a.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(o,!0),a.parentNode.removeChild(a)),-1!==(l=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(l,1)),r){r.parentNode.removeChild(r);var l=this.renderedPagesList.indexOf(o);-1!==l&&this.renderedPagesList.splice(l,1)}}},e.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},e.prototype.renderPagesVirtually=function(){return h(this,void 0,void 0,function(){var e,t=this;return d(this,function(i){return e=this,setTimeout(function(){t.initiateRenderPagesVirtually(e)},500),[2]})})},e.prototype.initiateRenderPagesVirtually=function(e){var t=this,i={hashId:e.hashId,isCompletePageSizeNotReceived:!0},n=new XMLHttpRequest;n.open("POST",e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.send(JSON.stringify(i)),n.onreadystatechange=function(i){if(4===n.readyState&&200===n.status){var o=i.currentTarget.response;if("object"!=typeof o&&(o=JSON.parse(o)),o){for(var r=o,s=e.pageSize[e.pageLimit-1].top,a=e.pageLimit;a<e.pageCount;a++){var l=r.pageSizes[a].split(",");if(null!==e.pageSize[a-1]&&0!==a){var h=e.pageSize[a-1].height;s=t.pageGap+parseFloat(h)+s}var d={width:parseFloat(l[0]),height:parseFloat(l[1]),top:s};t.pageSize.push(d)}t.pageContainer.style.height=t.getPageTop(t.pageSize.length-1)+t.getPageHeight(t.pageSize.length-1)+"px"}}else 4===n.readyState&&400===n.status&&t.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)},n.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)}},e.prototype.renderPage=function(e,t){var i=this;if(e){var n=this.getPageWidth(t),o=this.getPageHeight(t),r=this.getElement("_pageCanvas_"+t),s=this.getElement("_pageDiv_"+t);if(s&&(s.style.width=n+"px",s.style.height=o+"px",s.style.top=this.getPageTop(t)+"px",s.style.left=this.updateLeftPosition(t)+"px"),r){r.style.width=n+"px",r.style.height=o+"px";var a=r.getContext("2d"),l=e.image,h=e.transformationMatrix;if(l){var d=new Image;d.onload=function(){parseInt((1.5*n).toString())===d.width&&(isNaN(parseFloat(r.style.width))||(r.style.width=n+"px",r.style.height=o+"px",r.height=2*o,r.width=2*n),a.setTransform(h.Elements[0],h.Elements[1],h.Elements[2],h.Elements[3],h.Elements[4],h.Elements[5]),a.drawImage(d,0,0,r.width,r.height),i.showPageLoadingIndicator(t,!1),0===t&&i.isDocumentLoaded&&(i.pdfViewer.fireDocumentLoad(),i.isDocumentLoaded=!1),i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement())},d.src=l,this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.pushImageObjects(d)}var p=s.getElementsByTagName("a");if(0!==p.length)for(var c=p.length-1;c>=0;c--)p[c].parentNode.removeChild(p[c]);this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.renderTextContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t)}}},e.prototype.renderTextContent=function(e,t){var i=e.textContent,n=e.textBounds,o=this.getElement("_textLayer_"+t);o&&(0===o.childNodes.length?this.textLayer.renderTextContents(t,i,n):this.textLayer.resizeTextContents(t,i,n))},e.prototype.renderPageContainer=function(e,i,n,o){var r=t.createElement("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div"});r.style.width=i+"px",r.style.height=n+"px",r.style.left=this.updateLeftPosition(e)+"px",r.style.top=o+"px",this.pageContainer.appendChild(r),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(r,e),this.renderPageCanvas(r,i,n,e)},e.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},e.prototype.renderPageCanvas=function(e,i,n,o){var r=t.createElement("canvas",{id:this.pdfViewer.element.id+"_pageCanvas_"+o,className:"e-pv-page-canvas"});return r.width=i,r.height=n,e.appendChild(r),this.textLayer.addTextLayer(o,i,n,e),r},e.prototype.updateLeftPosition=function(e){var t;return((t=(this.viewerContainer.getBoundingClientRect().width-this.getPageWidth(e))/2)<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType))&&(t=this.pageLeft),t},e.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[e]){((t=(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2)<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType))&&(t=this.pageLeft);var i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);i&&(i.style.left=t+"px")}},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.initiatePageViewScrollChanged=function(){this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},e.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},e.prototype.pageViewScrollChanged=function(e){this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement())),!this.getMagnified()&&!this.getPagesPinchZoomed()){var i=t-1;null!==this.getElement("_pageCanvas_"+i)&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement()));var n=t+1;if(n<this.pageCount&&-1===this.renderedPagesList.indexOf(n)&&!this.getMagnified()){this.createRequestForRender(n);var o=this.getPageHeight(n);for(this.renderCountIncrement();this.viewerContainer.clientHeight>o&&(n+=1)<this.pageCount;)this.renderPageElement(n),this.createRequestForRender(n),o+=this.getPageHeight(n),this.renderCountIncrement()}}},e.prototype.downloadDocument=function(e){var i=t.createElement("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(i.download=this.pdfViewer.fileName),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent")}},e.prototype.createRequestForDownload=function(){var e,t=this;e={hashId:this.hashId};var i=new XMLHttpRequest;i.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.download),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="text",i.send(JSON.stringify(e)),i.onreadystatechange=function(e){if(4===i.readyState&&200===i.status){var n=e.currentTarget.response;if("object"==typeof n&&(n=JSON.parse(n)),n){var o=t.createBlobUrl(n.split("base64,")[1],"application/pdf");t.downloadDocument(o)}}else 4===i.readyState&&400===i.status&&t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)},i.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.createRequestForRender=function(e){var t=this,i=this.getElement("_pageCanvas_"+e),n=this.getElement("_oldCanvas_"+e);if(this.getPagesZoomed()?this.showPageLoadingIndicator(e,!1):this.showPageLoadingIndicator(e,!0),i){isNaN(parseFloat(i.style.width))&&!n||this.showPageLoadingIndicator(e,!1);var o=this.getStoredData(e);if(o)this.renderPage(o,e);else for(var r=0;r<1;r++)for(var s=this,a=0;a<1;a++)!function(i){var n=void 0;n={xCoordinate:r,yCoordinate:i,pageNumber:e,documentId:s.documentId,hashId:s.hashId,zoomFactor:s.getZoomFactor()};var o=new XMLHttpRequest;o.open("POST",s.pdfViewer.serviceUrl+"/"+s.pdfViewer.serverActionSettings.renderPages),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.responseType="json",o.send(JSON.stringify(n)),o.onreadystatechange=function(i){var n=t;if(4===o.readyState&&200===o.status){var r=i.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),r&&r.image&&(n.storeWinData(r,e),n.renderPage(r,e))}else 4===o.readyState&&400===o.status&&t.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)},o.onerror=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText)}}(a);this.renderedPagesList.push(e)}},e.prototype.getStoredData=function(e){var t=this.getWindowSessionStorage(e)?this.getWindowSessionStorage(e):this.getPinchZoomPage(e),i=null;return t&&(i=t,this.isPinchZoomStorage||(i=JSON.parse(t)),this.isPinchZoomStorage=!1),i},e.prototype.storeWinData=function(e,t){var i={image:this.createBlobUrl(e.image.split("base64,")[1],"image/png"),transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,textBounds:e.textBounds,pageText:e.pageText};!this.pdfViewer.magnificationModule||this.pdfViewer.magnificationModule.checkZoomFactor()?this.manageSessionStorage(t,i):this.pinchZoomStorage.push({index:t,pinchZoomStorage:i})},e.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},e.prototype.getWindowSessionStorage=function(e){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+this.getZoomFactor())},e.prototype.manageSessionStorage=function(e,t){if(this.pageCount>this.sessionLimit&&window.sessionStorage.length>this.sessionLimit){var i=this.currentPageNumber-this.sessionLimit;i<0&&(i=0);var n=this.currentPageNumber+this.sessionLimit;n>this.pageCount&&(n=this.pageCount);for(var o=0;o<=this.pageCount;o++)i<=o&&o<n||window.sessionStorage.removeItem(this.documentId+"_"+o+"_"+this.getZoomFactor())}window.sessionStorage.setItem(this.documentId+"_"+e+"_"+this.getZoomFactor(),JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+this.getZoomFactor())},e.prototype.createBlobUrl=function(e,t){for(var i=atob(e),n=[],o=0;o<i.length;o+=512){for(var r=i.slice(o,o+512),s=new Array(r.length),a=0;a<r.length;a++)s[a]=r.charCodeAt(a);var l=new Uint8Array(s);n.push(l)}var h=new Blob(n,{type:t});return URL.createObjectURL(h)},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},e.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},e.prototype.isClickedOnScrollBar=function(e){var t=!1;return this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(t=!0,this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(t=!0,this.setScrollDownValue(e.type,!0)),t},e.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},e.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",function(){return!1})},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},e.prototype.getPageWidth=function(e){return this.pageSize[e].width*this.getZoomFactor()},e.prototype.getPageHeight=function(e){return this.pageSize[e].height*this.getZoomFactor()},e.prototype.getPageTop=function(e){return this.pageSize[e].top*this.getZoomFactor()},e}(),c=function(){function e(e,t){var i=this;this.textBoundsArray=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addTextLayer=function(e,i,n,o){if(!document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e)){var r=t.createElement("div",{id:this.pdfViewer.element.id+"_textLayer_"+e,className:"e-pv-text-layer"});r.style.width=i+"px",r.style.height=n+"px",o.appendChild(r)}},e.prototype.renderTextContents=function(e,i,n){var o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),r=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e);if(r&&0===o.childNodes.length)for(var s=0;s<i.length;s++){var a=n[s],l=t.createElement("div",{id:this.pdfViewer.element.id+"_text_"+e+"_"+s,className:"e-pv-text"}),h=i[s];h=(h=h.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),l.innerHTML=h.replace(/&nbsp;/g," ")," "!==i[s].replace(/  +/g," ")&&(l.style.whiteSpace="pre"),this.setStyleToTextDiv(l,a.X,a.Y,a.Bottom,a.Width,a.Height,a),this.setTextElementProperties(l);var d=r.getContext("2d");d.font=l.style.fontSize+" "+l.style.fontFamily;var p=d.measureText(i[s].replace(/(\r\n|\n|\r)/gm,"")).width,c=a.Width*this.pdfViewerBase.getZoomFactor()/p;l.style.transform="scaleX("+c+")",o.appendChild(l),this.resizeExcessDiv(o,l),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&l.classList.add("e-pv-cursor")}},e.prototype.resizeTextContents=function(e,t,i){var n=this.pdfViewerBase.getElement("_textLayer_"+e),o=this.pdfViewerBase.getElement("_pageCanvas_"+e);if(o)for(var r=0;r<n.childNodes.length;r++){var s=void 0,a=this.pdfViewerBase.getElement("_text_"+e+"_"+r);i&&(s=i[r],this.setStyleToTextDiv(a,s.X,s.Y,s.Bottom,s.Width,s.Height,i)),this.setTextElementProperties(a);var l=o.getContext("2d");l.font=a.style.fontSize+" "+a.style.fontFamily;var h=void 0;h=t?l.measureText(t[r].replace(/(\r\n|\n|\r)/gm,"")).width:l.measureText(a.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;var d=s.Width*this.pdfViewerBase.getZoomFactor()/h;a.style.transform="scaleX("+d+")",this.resizeExcessDiv(n,a)}else n.parentElement.removeChild(n)},e.prototype.setTextElementProperties=function(e){e.style.fontFamily="sans-serif",e.style.transformOrigin="0%"},e.prototype.resizeTextContentsOnZoom=function(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),i=[],n=[];if(t){var o=JSON.parse(t);i=o.textBounds,n=o.textContent}if(0!==i.length)this.textBoundsArray.push({pageNumber:e,textBounds:i}),this.resizeTextContents(e,n,i);else{var r=this.textBoundsArray.filter(function(t){return t.pageNumber===e});r&&0!==r.length&&(i=r[0].textBounds,this.resizeTextContents(e,null,i))}},e.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();(n.width+n.left>=i.width+i.left||n.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},e.prototype.clearTextLayers=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1;for(var i=document.querySelectorAll('div[id*="_textLayer_"]'),n=0;n<i.length;n++)if(i[n].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var o=parseInt(i[n].id.split("_textLayer_")[1]);e+1<=o&&o<=t-1||i[n].remove()}else this.pdfViewerBase.getPinchZoomed(),i[n].remove()},e.prototype.convertToSpan=function(e,i,n,o,r,s){var a=this.pdfViewerBase.getElement("_text_"+e+"_"+i),l=r.substring(n,o),h=document.createTextNode(l);if(s){var d=t.createElement("span");d.className=s+" e-pv-text",d.appendChild(h),a.appendChild(d)}else a.appendChild(h)},e.prototype.applySpanForSelection=function(e,t,i,n,o,r){if(this.pdfViewer.textSelectionModule)for(var s=e;s<=t;s++){var a=void 0,l=void 0,h=this.pdfViewerBase.getElement("_textLayer_"+s).childNodes;s===e?(a=i,l=h.length-1):s===t?(a=0,l=n):(a=0,l=h.length-1),e===t&&(a=i,l=n);for(var d=a;d<=l;d++){var p=this.pdfViewerBase.getElement("_text_"+s+"_"+d),c=void 0,u=void 0,f=void 0;f=p.textContent.length;var m=p.textContent;p.textContent="",d===a?(c=s===e?o:0,u=f,this.convertToSpan(s,d,0,c,m,null)):d===l&&s===t?(c=0,u=r):(c=0,u=f),a===l&&(c=o,u=r),this.convertToSpan(s,d,c,u,m,"e-pv-maintaincontent"),d===l&&s===t&&this.convertToSpan(s,d,u,m.length,m,null)}}},e.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[t].childNodes,n=0;n<i.length;n++){var o=i[n],r=o.textContent;(o.childNodes.length>1||1===o.childNodes.length&&"SPAN"===o.childNodes[0].tagName)&&(o.textContent="",o.textContent=r)}},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,r,s){e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.bottom=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=o*this.pdfViewerBase.getZoomFactor()+"px";var a=r*this.pdfViewerBase.getZoomFactor();e.style.height=a+"px",a>11&&s?(e.style.top=parseFloat(e.style.top)+2+"px",e.style.fontSize=parseInt(r.toString())*this.pdfViewerBase.getZoomFactor()-2.6+"px"):e.style.fontSize=r*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},e.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[i].childNodes,o=0;o<n.length;o++){var r=n[o];e?r.classList.add("e-pv-cursor"):r.classList.remove("e-pv-cursor")}},e.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},e.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},e.prototype.createNotificationPopup=function(e){var n=this,o=t.createElement("div",{id:this.pdfViewer.element.id+"_notify",className:"e-pv-notification-popup"});this.pdfViewerBase.viewerContainer.appendChild(o),this.notifyDialog=new i.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("PdfViewer"),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeNotification.bind(this)}],content:'<div class="e-pv-notification-popup-content">'+e+"</div>",target:this.pdfViewer.element,beforeClose:function(){n.notifyDialog.destroy(),n.pdfViewer.element.removeChild(o),n.pdfViewer.textSearchModule&&(n.pdfViewer.textSearch.isMessagePopupOpened=!1)}}),this.notifyDialog.appendTo(o)},e}(),u=function(){function e(e,t){this.copyContextMenu=[],this.pdfViewer=e,this.pdfViewerBase=t,this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Copy")}]}return e.prototype.createContextMenu=function(){this.contextMenuElement=t.createElement("ul",{id:this.pdfViewer.element.id+"_context_menu"}),this.pdfViewer.element.appendChild(this.contextMenuElement),this.contextMenuObj=new n.ContextMenu({target:"#"+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),cssClass:"e-pv-context-menu"}),this.contextMenuObj.appendTo(this.contextMenuElement),t.Browser.isDevice?this.contextMenuObj.animationSettings.effect="ZoomIn":this.contextMenuObj.animationSettings.effect="SlideDown"},e.prototype.contextMenuOnBeforeOpen=function(e){this.pdfViewer.textSelectionModule?e.event&&(this.isClickWithinSelectionBounds(e.event)?(!e.event.target.classList.contains("e-pv-maintaincontent")&&e.event.target.classList.contains("e-pv-text")||e.event.target.classList.contains("e-pv-text-layer"))&&(e.cancel=!0):e.cancel=!0):e.cancel=!0},e.prototype.isClickWithinSelectionBounds=function(e){var t=!1,i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber-1);if(i)for(var n=0;n<i.length;n++){var o=i[n];if(this.getHorizontalValue(o.left)<e.clientX&&this.getHorizontalValue(o.right)>e.clientX&&this.getVerticalValue(o.top)<e.clientY&&this.getVerticalValue(o.bottom)>e.clientY){t=!0;break}}return t},e.prototype.getHorizontalClientValue=function(e){return e-this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left},e.prototype.getVerticalClientValue=function(e){return e-this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().top},e.prototype.getHorizontalValue=function(e){var t=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect();return e*this.pdfViewerBase.getZoomFactor()+t.left},e.prototype.getVerticalValue=function(e){var t=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect();return e*this.pdfViewerBase.getZoomFactor()+t.top},e.prototype.onMenuItemSelect=function(e){switch(e.item.text){case"Copy":this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuObj.close())}},e}(),f=function(){function e(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=.02,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2}return e.prototype.zoomTo=function(e){e<50?e=50:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},e.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=6?this.zoomLevel=6:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");this.isAutoZoom=!1,this.onZoomChanged(e),this.pdfViewerBase.viewerContainer.style.overflowY="hidden",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor},e.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height,n=0,o=0;if(this.fitType=e,"fitToWidth"===this.fitType){for(var r=0,s=0;s<this.pdfViewerBase.pageSize.length;s++)(r=this.pdfViewerBase.pageSize[s].width)>n&&(n=r);var a=(t-this.scrollWidth)/n;return this.isAutoZoom&&(this.fitType=null,1===(a=Math.min(1,a))&&(this.zoomLevel=2)),100*a}for(var l=0,s=0;s<this.pdfViewerBase.pageSize.length;s++)(l=this.pdfViewerBase.pageSize[s].height)>o&&(o=l);return 1===this.pdfViewerBase.pageCount?(i-this.pdfViewerBase.pageSize[0].top)/o*100:i/o*100},e.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<.5&&(e=.5),this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;e>2&&(e+=this.pinchStep),e>4&&(e=4),this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var n=Math.round((t+i)/2);this.zoomPercentages[n]<=e?t=n+1:this.zoomPercentages[n]>=e&&(i=n-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},e.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},e.prototype.onZoomChanged=function(e){this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?this.responsivePages():this.magnifyPages()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomButtons(),this.pdfViewer.fireZoomChange()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor)},e.prototype.setTouchPoints=function(e,t){this.touchCenterX=e,this.touchCenterY=t},e.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.touchCenterX=(e+i)/2,this.touchCenterY=(t+n)/2,this.zoomOverPages(e,t,i,n)},e.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),this.isPagesZoomed=!0;var e=this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);if(this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.isMagnified=!0,this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var t=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.viewerContainer.scrollTop=e,this.magnifyPageRerenderTimer=setTimeout(function(){t.rerenderMagnifiedPages()},800)}},e.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor},e.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},e.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="oldCanvas"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.element.id+"_pageCanvas_"+i}this.isRerenderCanvasCreated=!1},e.prototype.pushImageObjects=function(e){this.imageObjects.push(e)},e.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},e.prototype.rerenderMagnifiedPages=function(){this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1},e.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval(function(){t.initiateRerender(i)},1)},e.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.isPinchZoomed){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=i.getBoundingClientRect(),o=n.top*this.previousZoomFactor,r=e+this.touchCenterY,s=n.top*this.zoomFactor+(r-o<0?r-o:(r-o)*(this.zoomFactor/this.previousZoomFactor));this.pdfViewerBase.viewerContainer.scrollTop=s-this.touchCenterY;var a=n.width*this.previousZoomFactor/n.width,l=this.zoomFactor/a-1,h=this.touchCenterX-n.left;this.pdfViewerBase.viewerContainer.scrollLeft+=h*l}}this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[]},e.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){if(this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.textLayer)for(var t=document.querySelectorAll('div[id*="_textLayer_"]'),i=0;i<t.length;i++)t[i].style.display="block";this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout(function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)},300)}},e.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100))},e.prototype.initiateRerender=function(e){e.pageRerenderCount===e.pdfViewerBase.reRenderedCount&&0!==e.pageRerenderCount&&0!==e.pdfViewerBase.reRenderedCount&&e.reRenderAfterPinch(this.reRenderPageNumber)},e.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3;t=t>0?t:0;var i=e+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),r=this.pdfViewerBase.getElement("_pageCanvas_"+n);r&&(r.style.display="block");var s=this.pdfViewerBase.getElement("_oldCanvas_"+n);s&&s.parentNode.removeChild(s),o&&(o.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},e.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3;t=t>0?t:0;var i=e+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageCanvas_"+n);o&&(o.id=this.pdfViewer.element.id+"_oldCanvas_"+n,this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),this.pdfViewerBase.pageSize[n].width*this.zoomFactor,this.pdfViewerBase.pageSize[n].height*this.zoomFactor,n).style.display="none")}this.isRerenderCanvasCreated=!0},e.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100)))},e.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},e.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},e.prototype.resizeCanvas=function(e){var t=e-3;t=t>0?t:0;var i=e+3;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+n);if(o&&t<=n&&n<=i){var s=!1;if(this.pdfViewer.textSelectionModule&&(s=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(n)),null!=this.pdfViewerBase.pageSize[n]){var a=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,l=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;o.style.width=a+"px",o.style.height=l+"px",o.style.top=this.pdfViewerBase.pageSize[n].top*this.zoomFactor+"px",o.style.left=this.pdfViewerBase.updateLeftPosition(n)+"px";var h=this.pdfViewerBase.getElement("_pageCanvas_"+n);if(h&&(h.style.width=a+"px",h.style.height=l+"px"),r&&(r.style.width=a+"px",r.style.height=l+"px",this.pdfViewer.textSelectionModule))if(this.isPinchZoomed)r.style.display="none";else if(this.isMagnified){var d=e-2==0?0:e-2,p=e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e;d<=n&&n<=p&&(this.pdfViewer.textSelectionModule.isTextSelection&&s||this.pdfViewerBase.textLayer.getTextSearchStatus())?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(n),this.pdfViewer.textSelectionModule.isTextSelection&&s&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)):r.style.display="none"}else r.style.display="none"}}}},e.prototype.zoomOverPages=function(e,t,i,n){var o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(o>this.previousTouchDifference?this.pinchOut():o<this.previousTouchDifference&&this.pinchIn()),this.previousTouchDifference=o},e.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},e.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(e.preventDefault(),e.wheelDelta>0?this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.magnifyBehaviorKeyDown=function(e){var t=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomOut());break;case 48:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.fitToPage());break;case 49:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.zoomTo(100))}},e.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden")},e.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&(e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},e.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden")},e.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},e.prototype.destroy=function(){this.imageObjects=void 0},e.prototype.getZoomFactor=function(e){return e/100},e.prototype.getModuleName=function(){return"Magnification"},e}(),m=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,++this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,--this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1)},e.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.destroy=function(){this.pageNumber=0},e.prototype.getModuleName=function(){return"Navigation"},e}(),g=function(){function e(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);t.previousElement&&(t.previousElement.classList.remove("e-pv-thumbnail-selection"),t.previousElement.classList.remove("e-pv-thumbnail-focus"),t.previousElement.classList.add("e-pv-thumbnail-selection-ring")),e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?(t.setSelectionStyle(e.srcElement.parentElement),t.previousElement=e.srcElement.parentElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n&&(t.setSelectionStyle(e.srcElement),t.previousElement=e.srcElement),t.isThumbnailClicked=!0,t.goToThumbnailPage(n+1),t.pdfViewerBase.focusViewerContainer()},this.thumbnailMouseOver=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?t.setMouseOverStyle(e.srcElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_image_"+n&&t.setMouseOverStyle(e.srcElement.parentElement)},this.thumbnailMouseLeave=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_view"?t.setMouseLeaveStyle(e.srcElement.children[0].children[0]):e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_"+n&&t.setMouseLeaveStyle(e.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createThumbnailContainer=function(){this.thumbnailView=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},e.prototype.createRequestForThumbnails=function(){var e=this;return!!document.documentMode?(this.requestCreation(e),null):new Promise(function(t,i){e.requestCreation(e)})},e.prototype.requestCreation=function(e){var t=this;e.isThumbnailCompleted?(e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount):(e.thumbnailLimit=e.thumbnailLimit<e.pdfViewer.pageCount?e.thumbnailLimit:e.pdfViewer.pageCount,e.thumbnailLimit!==e.pdfViewer.pageCount&&(e.isThumbnailCompleted=!1,e.startIndex=0));var i=new XMLHttpRequest,n={startPage:e.startIndex,endPage:e.thumbnailLimit,sizeX:99.7,sizeY:141,hashId:e.pdfViewerBase.hashId};i.open("POST",e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="json",i.send(JSON.stringify(n)),i.onreadystatechange=function(t){if(4===i.readyState&&200===i.status){var n=t.currentTarget.response;"object"!=typeof n&&(n=JSON.parse(n)),e.renderThumbnailImage(n),e.isThumbnailCompleted||(e.startIndex=e.thumbnailLimit,e.isThumbnailCompleted=!0)}},i.onerror=function(n){t.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];if(t){var o=n.offsetTop+n.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=o}this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},e.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var o=this.getPageNumberFromID(i.first.id),r=n>1?this.getPageNumberFromID(i.last.id):o;e<=o||e>=r?t=!0:i.views.some(function(i){var n=i.id.split("_"),o=n[n.length-1];return parseInt(o)===e&&(t=i.percent<100,!0)})}}return t},e.prototype.getPageNumberFromID=function(e){var t=e.split("_"),i=t[t.length-1];return parseInt(i)},e.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},e.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var i=this.startIndex;i<this.thumbnailLimit;i++){var n=t.createElement("a",{id:"page_"+i}),o=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_"+i,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+i,className:"e-pv-thumbnail-selection-ring"}),o.appendChild(this.thumbnailSelectionRing);var r=t.createElement("div",{id:this.pdfViewer.element.id+"_thumbnail_pagenumber_"+i,className:"e-pv-thumbnail-number"});r.textContent=(i+1).toString(),o.appendChild(r),this.thumbnailImage=t.createElement("img",{id:this.pdfViewer.element.id+"_thumbnail_image_"+i,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[i],this.thumbnailSelectionRing.appendChild(this.thumbnailImage),n.appendChild(o),this.thumbnailView.appendChild(n),this.wireUpEvents(),0===i&&this.setMouseFocusToFirstPage()}this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView&&(!!document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()]))},e.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},e.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},e.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},e.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},e.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},e.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},e.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.isThumbnailCompleted=!1,this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane.resetThumbnailView(),this.unwireUpEvents()},e.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},e.prototype.getVisibleElements=function(e,t){function i(e){return e.offsetTop+e.clientTop+e.clientHeight>c}var n,o,r,s,a,l,h,d,p,c=e.scrollTop,u=c+e.clientHeight,f=e.scrollLeft,m=f+e.clientWidth,g=[],w=0===t.length?0:this.binarySearchFirstItem(t,i);t.length>0&&(w=this.backtrackBeforeAllVisibleElements(w,t,c));for(var v=-1,b=w,C=t.length;b<C;b++){if(n=this.getThumbnailElement(b),o=n,l=o.offsetLeft+o.clientLeft,r=o.offsetTop+o.clientTop,h=o.clientWidth,s=o.clientHeight,d=l+h,a=r+s,-1===v)a>=u&&(v=a);else if(r>v)break;a<=c||r>=u||d<=f||l>=m||(p=(s-(Math.max(0,c-r)+Math.max(0,a-u)))*(h-(Math.max(0,f-l)+Math.max(0,d-m)))*100/s/h|0,g.push({id:n.id,x:l,y:r,view:n,percent:p}))}return{first:g[0],last:g[g.length-1],views:g}},e.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var o=i+n>>1;t(this.getThumbnailElement(o))?n=o:i=o+1}return i},e.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),o=n.offsetTop+n.clientTop;o>=i&&(o=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var r=e-2;r>=0&&!((n=this.getThumbnailElement(r)).offsetTop+n.clientTop+n.clientHeight<=o);--r)e=r;return e},e.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"ThumbnailView"},e}(),w=function(){function e(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.onToolbarKeydown=function(e){var t=e.target.id;t!==i.pdfViewer.element.id+"_currentPageInput"&&t!==i.pdfViewer.element.id+"_zoomDropDown"&&(e.preventDefault(),e.stopPropagation())},this.toolbarClickHandler=function(e){if(e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2])e.cancel=!0;else if(e.originalEvent.target.id===i.pdfViewer.element.id+"_openIcon"){var t=e.originalEvent.target.parentElement.dataset;if(t&&t.tooltipId){var n=document.getElementById(t.tooltipId);n&&(n.style.display="none")}}switch(e.originalEvent.target.id){case i.pdfViewer.element.id+"_open":case i.pdfViewer.element.id+"_openIcon":i.fileInputElement.click();break;case i.pdfViewer.element.id+"_download":case i.pdfViewer.element.id+"_downloadIcon":i.pdfViewerBase.download();break;case i.pdfViewer.element.id+"_print":case i.pdfViewer.element.id+"_printIcon":i.pdfViewer.printModule&&i.pdfViewer.printModule.print();break;case i.pdfViewer.element.id+"_firstPage":case i.pdfViewer.element.id+"_firstPageIcon":i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToFirstPage();break;case i.pdfViewer.element.id+"_previousPage":case i.pdfViewer.element.id+"_previousPageIcon":i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPreviousPage();break;case i.pdfViewer.element.id+"_nextPage":case i.pdfViewer.element.id+"_nextPageIcon":i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToNextPage();break;case i.pdfViewer.element.id+"_lastPage":case i.pdfViewer.element.id+"_lastPageIcon":i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToLastPage();break;case i.pdfViewer.element.id+"_zoomIn":case i.pdfViewer.element.id+"_zoomInIcon":i.pdfViewer.magnificationModule.zoomIn();break;case i.pdfViewer.element.id+"_zoomOut":case i.pdfViewer.element.id+"_zoomOutIcon":i.pdfViewer.magnificationModule.zoomOut();break;case i.pdfViewer.element.id+"_selectTool":case i.pdfViewer.element.id+"_selectToolIcon":i.isSelectionToolDisabled||(i.pdfViewerBase.initiateTextSelectMode(),i.updateInteractionTools(!0));break;case i.pdfViewer.element.id+"_handTool":case i.pdfViewer.element.id+"_handToolIcon":i.isScrollingToolDisabled||(i.pdfViewerBase.initiatePanning(),i.updateInteractionTools(!1));break;case i.pdfViewer.element.id+"_search":case i.pdfViewer.element.id+"_searchIcon":i.textSearchButtonHandler()}e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[1]&&e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[2]&&e.originalEvent.target!==i.currentPageBoxElement&&e.originalEvent.target!==i.textSearchItem.childNodes[0]&&(e.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if(n){i.uploadedDocumentName=n.name;var o=new FileReader;o.readAsDataURL(n),o.onload=function(e){var t=e.currentTarget.result;i.pdfViewer.load(t,null)}}}},this.navigateToPage=function(e){if(13===e.which){var t=parseInt(i.currentPageBoxElement.value);null!==t&&t>0&&t<=i.pdfViewerBase.pageCount?i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPage(t):i.updateCurrentPage(i.pdfViewerBase.currentPageNumber),i.currentPageBoxElement.blur(),i.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===i.currentPageBox.value||i.currentPageBox.value>=i.pdfViewerBase.pageCount||i.currentPageBox.value!==i.pdfViewerBase.currentPageNumber)&&i.updateCurrentPage(i.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.intializeToolbar=function(e){var t=this.createToolbar(e);return!!document.documentMode&&this.totalPageItem.classList.add("e-pv-total-page-ms"),this.createFileElement(t),this.wireEvent(),this.updateToolbarItems(),this.applyToolbarSettings(),this.initialEnableItems(),t},e.prototype.showToolbar=function(e){var t=this.toolbarElement;e?t.style.display="block":(t.style.display="none",this.pdfViewerBase.navigationPane.sideBarToolbar.style.display="none")},e.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.showSeparator(e)},e.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t)}},e.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},e.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},e.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},e.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},e.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,this.applyHideToToolbar(e,16,16)},e.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,17,17)},e.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,this.applyHideToToolbar(e,15,15)},e.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},e.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},e.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},e.prototype.enableSelectionTool=function(e){this.toolbar.enableItems(this.textSelectItem.parentElement,e)},e.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},e.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},e.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},e.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},e.prototype.resetToolbar=function(){this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems()},e.prototype.updateToolbarItems=function(){0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0))},e.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},e.prototype.updateZoomButtons=function(){this.pdfViewer.magnificationModule&&!this.isMagnificationToolDisabled&&(this.pdfViewer.magnificationModule.zoomFactor<=.5?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},e.prototype.destroy=function(){this.unWireEvent(),this.toolbar.destroy(),this.toolbarElement.remove()},e.prototype.updateCurrentPage=function(e){this.currentPageBox.value===e&&(this.currentPageBoxElement.value=e.toString()),this.currentPageBox.value=e,this.pdfViewerBase.currentPageNumber=e},e.prototype.updateTotalPage=function(){this.pdfViewerBase.pageCount>0&&(this.currentPageBox.min=1),this.totalPageItem.textContent="of "+this.pdfViewerBase.pageCount.toString()},e.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},e.prototype.createToolbar=function(e){this.toolbarElement=t.createElement("div",{id:this.pdfViewer.element.id+"_toolbarContainer",className:"e-pv-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.itemsContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_toolbarItemsContainer"});var i=this.createToolbarItem("button",this.pdfViewer.element.id+"_open",this.pdfViewer.localeObj.getConstant("Open"),"e-pv-open-document");this.openDocumentItem=i.firstChild,this.itemsContainer.appendChild(i),this.toolbarElement.appendChild(this.itemsContainer);var s=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(s);var a=this.createToolbarItem("button",this.pdfViewer.element.id+"_firstPage",this.pdfViewer.localeObj.getConstant("Go To First Page"),"e-pv-first-page-navigation");this.firstPageItem=a.firstChild,this.itemsContainer.appendChild(a);var l=this.createToolbarItem("button",this.pdfViewer.element.id+"_previousPage",this.pdfViewer.localeObj.getConstant("Previous Page"),"e-pv-previous-page-navigation");this.previousPageItem=l.firstChild,this.itemsContainer.appendChild(l);var h=this.createToolbarItem("button",this.pdfViewer.element.id+"_nextPage",this.pdfViewer.localeObj.getConstant("Next Page"),"e-pv-next-page-navigation");this.nextPageItem=h.firstChild,this.itemsContainer.appendChild(h);var d=this.createToolbarItem("button",this.pdfViewer.element.id+"_lastPage",this.pdfViewer.localeObj.getConstant("Go To Last Page"),"e-pv-last-page-navigation");this.lastPageItem=d.firstChild,this.itemsContainer.appendChild(d);var p=this.createToolbarItem("input",this.pdfViewer.element.id+"_currentPageInput",this.pdfViewer.localeObj.getConstant("Page Number"),null);this.itemsContainer.appendChild(p),this.currentPageBox=new o.NumericTextBox({value:0,format:"##",cssClass:"e-pv-current-page-box",showSpinButton:!1}),this.currentPageBoxElement=p.firstChild,this.currentPageBox.appendTo(this.currentPageBoxElement);var c=this.createToolbarItem("span",this.pdfViewer.element.id+"_totalPage",null,"e-pv-total-page");this.totalPageItem=c.firstChild,this.itemsContainer.appendChild(c),this.updateTotalPage();var u=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(u);var f=this.createToolbarItem("button",this.pdfViewer.element.id+"_zoomOut",this.pdfViewer.localeObj.getConstant("Zoom Out"),"e-pv-zoom-out");this.zoomOutItem=f.firstChild,this.itemsContainer.appendChild(f);var m=this.createToolbarItem("button",this.pdfViewer.element.id+"_zoomIn",this.pdfViewer.localeObj.getConstant("Zoom In"),"e-pv-zoom-in");this.zoomInItem=m.firstChild,this.itemsContainer.appendChild(m);var g=this.createToolbarItem("input",this.pdfViewer.element.id+"_zoomDropDown",this.pdfViewer.localeObj.getConstant("Zoom"),null);g.className=g.className+" e-pv-zoom-drop-down-container",this.zoomDropdownItem=g.firstChild,this.itemsContainer.appendChild(g);var w=t.createElement("div",{className:"e-separator"});this.itemsContainer.appendChild(w);var v=this.createToolbarItem("button",this.pdfViewer.element.id+"_selectTool",this.pdfViewer.localeObj.getConstant("Text Selection"),"e-pv-text-select-tool");this.textSelectItem=v.firstChild,this.itemsContainer.appendChild(v);var b=this.createToolbarItem("button",this.pdfViewer.element.id+"_handTool",this.pdfViewer.localeObj.getConstant("Panning"),"e-pv-pan-tool");this.panItem=b.firstChild,this.itemsContainer.appendChild(b);var C=this.createToolbarItem("button",this.pdfViewer.element.id+"_search",this.pdfViewer.localeObj.getConstant("Text Search"),"e-pv-text-search");this.textSearchItem=C.firstChild,this.itemsContainer.appendChild(C),C.style.position="absolute";var y=this.createToolbarItem("button",this.pdfViewer.element.id+"_download",this.pdfViewer.localeObj.getConstant("Download"),"e-pv-download-document");this.downloadItem=y.firstChild,y.style.position="absolute",y.style.left=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px",this.itemsContainer.appendChild(y);var V=this.createToolbarItem("button",this.pdfViewer.element.id+"_print",this.pdfViewer.localeObj.getConstant("Print"),"e-pv-print-document");this.printItem=V.firstChild,V.style.position="absolute",V.style.left=void 0!==y?this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-43+"px":this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()+"px",C.style.left=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-y.clientWidth-V.clientWidth-54+"px",this.itemsContainer.appendChild(V);var S=[{percent:"50%",id:"0"},{percent:"75%",id:"1"},{percent:"100%",id:"2"},{percent:"125%",id:"3"},{percent:"150%",id:"4"},{percent:"200%",id:"5"},{percent:"400%",id:"6"},{percent:this.pdfViewer.localeObj.getConstant("Fit Page"),id:"7"},{percent:this.pdfViewer.localeObj.getConstant("Fit Width"),id:"8"},{percent:this.pdfViewer.localeObj.getConstant("Automatic"),id:"9"}];return this.zoomDropDown=new r.ComboBox({dataSource:S,text:"100%",fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down",popupHeight:"402px",showClearButton:!1}),this.zoomDropDown.appendTo(this.zoomDropdownItem),this.toolbar=new n.Toolbar({clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.toolbar.appendTo(this.toolbarElement),this.toolbarElement.addEventListener("keydown",this.onToolbarKeydown),this.toolbarElement},e.prototype.createToolbarItem=function(e,n,o,r){var s=t.createElement("div",{id:n+"Container"}),a=t.createElement(e,{id:n});if(null!==r&&(s.className=r+"-container e-overflow-show e-popup-text",a.className=r),"button"===e&&n!==this.pdfViewer.element.id+"_zoomDropDown"){a.className="e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn "+r;var l=t.createElement("span",{id:n+"Icon",className:r+"-icon e-pv-icon"});a.appendChild(l)}else"input"===e&&n!==this.pdfViewer.element.id+"_zoomDropDown"&&(a.type="text");return s.appendChild(a),null!==o&&new i.Tooltip({content:o,opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(a),s},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.createFileElement=function(e){this.fileInputElement=t.createElement("input",{id:this.pdfViewer.element.id+"_fileUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file"}}),this.fileInputElement.setAttribute("accept",".pdf"),e.appendChild(this.fileInputElement)},e.prototype.wireEvent=function(){this.toolbarElement.addEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.fileInputElement.addEventListener("change",this.loadDocument),this.currentPageBoxElement.addEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.addEventListener("keypress",this.navigateToPage),this.zoomDropDown.change=this.zoomPercentSelect.bind(this),this.zoomDropDown.element.addEventListener("keypress",this.onZoomDropDownInput.bind(this)),this.zoomDropDown.element.addEventListener("click",this.onZoomDropDownInputClick.bind(this))},e.prototype.unWireEvent=function(){this.toolbarElement.removeEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.fileInputElement.removeEventListener("change",this.loadDocument),this.currentPageBoxElement.removeEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.removeEventListener("keypress",this.navigateToPage),this.zoomDropDown.removeEventListener("change",this.zoomPercentSelect),this.zoomDropDown.element.removeEventListener("keypress",this.onZoomDropDownInput),this.zoomDropDown.element.removeEventListener("click",this.onZoomDropDownInputClick)},e.prototype.onToolbarResize=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_toolbarContainer_nav"),i=document.getElementById(this.pdfViewer.element.id+"_downloadContainer"),n=document.getElementById(this.pdfViewer.element.id+"_printContainer"),o=document.getElementById(this.pdfViewer.element.id+"_searchContainer");t||(i&&(i.style.left=e+"px",i.style.position="absolute"),n&&(null!==i?(n.style.left=e-i.clientWidth+"px",n.style.position="absolute"):(n.style.left=e+"px",n.style.position="absolute")),o&&(o.style.position="absolute",o.style.left=null!==n?parseFloat(n.style.left)-n.clientWidth+"px":null!==i?parseFloat(i.style.left)-i.clientWidth+"px":e+"px"))},e.prototype.toolbarOnMouseup=function(e){e.target!==this.itemsContainer&&e.target!==this.toolbarElement||this.pdfViewerBase.focusViewerContainer()},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)this.toolbar.hideItem(o,n)},e.prototype.onZoomDropDownInput=function(e){if((e.which<48||e.which>57)&&8!==e.which&&13!==e.which)return e.preventDefault(),!1;if(13===e.which){e.preventDefault();var t=this.zoomDropDown.element.value;this.zoomDropDownChange(t)}return!0},e.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},e.prototype.zoomPercentSelect=function(e){if(this.pdfViewerBase.pageCount>0)if(e.isInteracted){if(e.itemData){var t=e.itemData.percent;this.zoomDropDownChange(t)}}else this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor)},e.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},e.prototype.updateZoomPercentage=function(e){var t=parseInt((100*e).toString())+"%";this.zoomDropDown.text===t&&(this.zoomDropDown.element.value=t),9===this.zoomDropDown.index&&(this.zoomDropDown.value=2),this.zoomDropDown.text=t},e.prototype.updateInteractionItems=function(){this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection?this.toolbar.enableItems(this.textSelectItem.parentElement,!0):this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},e.prototype.textSearchButtonHandler=function(){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){this.selectItem(this.textSearchItem);var e=document.getElementById(this.pdfViewer.element.id+"_search_input");e.select(),e.focus()}else this.deSelectItem(this.textSearchItem)},e.prototype.selectItem=function(e){e.classList.add("e-pv-select")},e.prototype.deSelectItem=function(e){e.classList.remove("e-pv-select")},e.prototype.updateInteractionTools=function(e){e?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem))},e.prototype.initialEnableItems=function(){this.pdfViewer.enableToolbar?this.showToolbar(!0):this.showToolbar(!1),this.pdfViewer.enablePrint?this.showPrintOption(!0):this.showPrintOption(!1),this.pdfViewer.enableDownload?this.showDownloadOption(!0):this.showDownloadOption(!1),this.pdfViewer.enableTextSearch?this.showSearchOption(!0):this.showSearchOption(!1)},e.prototype.showSeparator=function(e){(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&this.isOpenBtnVisible&&this.isDownloadBtnVisible&&this.isPrintBtnVisible||this.isOpenBtnVisible&&1===e.length)&&this.applyHideToToolbar(!1,1,1),this.isNavigationToolVisible&&this.isMagnificationToolVisible||this.isOpenBtnVisible||this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&this.isSelectionBtnVisible&&this.isScrollingBtnVisible)&&this.applyHideToToolbar(!1,12,12)},e.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItem;-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),this.showSeparator(e)},e.prototype.getModuleName=function(){return"Toolbar"},e}(),v=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},C=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return v(i,e),b([t.Property(!0)],i.prototype,"showTooltip",void 0),b([t.Property()],i.prototype,"toolbarItem",void 0),i}(t.ChildProperty),y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return v(i,e),b([t.Property("Load")],i.prototype,"load",void 0),b([t.Property("Unload")],i.prototype,"unload",void 0),b([t.Property("RenderPdfPages")],i.prototype,"renderPages",void 0),b([t.Property("RenderPdfPages")],i.prototype,"print",void 0),b([t.Property("Download")],i.prototype,"download",void 0),b([t.Property("RenderThumbnailImages")],i.prototype,"renderThumbnail",void 0),i}(t.ChildProperty),V=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.fileName=null,n.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel",Download:"Download file","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case","No matches":"Viewer has finished searching the document. No more matches were found","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue."},n.viewerBase=new p(n),n}return v(i,e),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this.viewerBase.pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPageNumber",{get:function(){return this.viewerBase.currentPageNumber},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),i.prototype.preRender=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale)},i.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode()},i.prototype.getModuleName=function(){return"PdfViewer"},i.prototype.getLocaleConstants=function(){return this.defaultLocale},i.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed)for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"enableToolbar":this.notify("",{module:"toolbar",enable:this.enableToolbar})}},i.prototype.getPersistData=function(){return"PdfViewer"},i.prototype.requiredModules=function(){var e=[];return this.enableMagnification&&e.push({member:"Magnification",args:[this,this.viewerBase]}),this.enableNavigation&&e.push({member:"Navigation",args:[this,this.viewerBase]}),this.enableToolbar&&e.push({member:"Toolbar",args:[this,this.viewerBase]}),this.enableHyperlink&&e.push({member:"LinkAnnotation",args:[this,this.viewerBase]}),this.enableThumbnail&&e.push({member:"ThumbnailView",args:[this,this.viewerBase]}),this.enableBookmark&&e.push({member:"BookmarkView",args:[this,this.viewerBase]}),this.enableTextSelection&&e.push({member:"TextSelection",args:[this,this.viewerBase]}),this.enableTextSearch&&e.push({member:"TextSearch",args:[this,this.viewerBase]}),this.enablePrint&&e.push({member:"Print",args:[this,this.viewerBase]}),e},i.prototype.load=function(e,t){0!==this.viewerBase.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.viewerBase.pageCount=0,this.viewerBase.currentPageNumber=0,this.toolbarModule&&this.toolbarModule.resetToolbar(),this.viewerBase.initiatePageRender(e,t)},i.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},i.prototype.unload=function(){this.viewerBase.clear(!0),this.viewerBase.pageCount=0,this.toolbarModule.resetToolbar(),this.magnificationModule.zoomTo(100)},i.prototype.destroy=function(){for(e.prototype.destroy.call(this),this.element.classList.remove("e-pdfviewer"),this.toolbarModule&&this.toolbarModule.destroy();this.element.hasChildNodes();)this.element.removeChild(this.element.lastChild);this.viewerBase.destroy()},i.prototype.fireDocumentLoad=function(){var e={name:"documentLoad",documentName:this.fileName};this.trigger("documentLoad",e)},i.prototype.fireDocumentUnload=function(e){var t={name:"documentUnload",documentName:e};this.trigger("documentUnload",t)},i.prototype.fireDocumentLoadFailed=function(e,t){var i={name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:e,password:t};this.trigger("documentLoadFailed",i)},i.prototype.fireAjaxRequestFailed=function(e,t){var i={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:e,errorMessage:t};this.trigger("ajaxRequestFailed",i)},i.prototype.firePageClick=function(e,t,i){var n={name:"pageClick",documentName:this.fileName,x:e,y:t,pageNumber:i};this.trigger("pageClick",n)},i.prototype.firePageChange=function(e){var t={name:"pageChange",documentName:this.fileName,currentPageNumber:this.viewerBase.currentPageNumber,previousPageNumber:e};this.trigger("pageChange",t)},i.prototype.fireZoomChange=function(){var e={name:"zoomChange",zoomValue:100*this.magnificationModule.zoomFactor,previousZoomValue:100*this.magnificationModule.previousZoomFactor};this.trigger("zoomChange",e)},i.prototype.fireHyperlinkClick=function(e){var t={name:"hyperlinkClick",hyperlink:e};this.trigger("hyperlinkClick",t)},b([t.Property()],i.prototype,"serviceUrl",void 0),b([t.Property()],i.prototype,"documentPath",void 0),b([t.Property("auto")],i.prototype,"height",void 0),b([t.Property("auto")],i.prototype,"width",void 0),b([t.Property(!0)],i.prototype,"enableToolbar",void 0),b([t.Property(!0)],i.prototype,"enableDownload",void 0),b([t.Property(!0)],i.prototype,"enablePrint",void 0),b([t.Property(!0)],i.prototype,"enableThumbnail",void 0),b([t.Property(!0)],i.prototype,"enableBookmark",void 0),b([t.Property(!0)],i.prototype,"enableHyperlink",void 0),b([t.Property("CurrentTab")],i.prototype,"hyperlinkOpenState",void 0),b([t.Property(!0)],i.prototype,"enableNavigation",void 0),b([t.Property(!0)],i.prototype,"enableMagnification",void 0),b([t.Property(!0)],i.prototype,"enableTextSelection",void 0),b([t.Property(!0)],i.prototype,"enableTextSearch",void 0),b([t.Property("TextSelection")],i.prototype,"interactionMode",void 0),b([t.Property({showTooltip:!0,toolbarItem:["OpenOption","UndoRedoTool","PageNavigationTool","MagnificationTool","PanTool","SelectionTool","CommentOption","TextMarkupAnnotationOption","FreeTextAnnotationOption","InkAnnotationOption","ShapeAnnotationOption","StampAnnotation","SignatureOption","SearchOption","PrintOption","DownloadOption"]})],i.prototype,"toolbarSettings",void 0),b([t.Property({load:"Load",renderPages:"RenderPdfPages",unload:"Unload",download:"Download",renderThumbnail:"RenderThumbnailImages"})],i.prototype,"serverActionSettings",void 0),b([t.Event()],i.prototype,"documentLoad",void 0),b([t.Event()],i.prototype,"documentUnload",void 0),b([t.Event()],i.prototype,"documentLoadFailed",void 0),b([t.Event()],i.prototype,"ajaxRequestFailed",void 0),b([t.Event()],i.prototype,"pageClick",void 0),b([t.Event()],i.prototype,"pageChange",void 0),b([t.Event()],i.prototype,"hyperlinkClick",void 0),b([t.Event()],i.prototype,"zoomChange",void 0),i=b([t.NotifyPropertyChanges],i)}(t.Component),S=function(){function e(e,t){var i=this;this.nodeClick=function(e){var t=Number(e.nodeData.id),n=i.bookmarksDestination.bookMarkDestination[t].PageIndex,o=i.bookmarksDestination.bookMarkDestination[t].Y;return i.goToBookmark(n,o),!1},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createRequestForBookmarks=function(){var e=this,t=this,i=new XMLHttpRequest,n={hashId:this.pdfViewerBase.hashId};i.open("POST",t.pdfViewer.serviceUrl+"/Bookmarks"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.responseType="json",i.send(JSON.stringify(n)),i.onreadystatechange=function(t){if(4===i.readyState&&200===i.status){e.pdfViewerBase.navigationPane.disableBookmarkButton();var n=t.currentTarget.response;n&&("object"!=typeof n&&(n=JSON.parse(n)),e.bookmarks={bookMark:n.Bookmarks},e.bookmarksDestination={bookMarkDestination:n.BookmarksDestination}),null==e.bookmarks?e.pdfViewerBase.navigationPane.disableBookmarkButton():e.pdfViewerBase.navigationPane.enableBookmarkButton()}},i.onerror=function(n){e.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},e.prototype.renderBookmarkcontent=function(){null!=this.bookmarkView&&this.bookmarkView.parentElement.removeChild(this.bookmarkView),this.bookmarkView=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var e=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"}),i=t.createElement("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"}),o=t.createElement("div",{id:this.pdfViewer.element.id+"_bookmark_Title",className:"e-pv-bookmark-Title"});o.innerText="${Title}",e.appendChild(i),e.appendChild(o),new n.TreeView({fields:{dataSource:this.bookmarks.bookMark,id:"Id",text:"Title",child:"Child",hasChildren:"HasChild"},nodeTemplate:e.outerHTML,nodeSelected:this.nodeClick.bind(this)}).appendTo(this.bookmarkView)},e.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},e.prototype.goToBookmark=function(e,t){var i=this,n=this.pdfViewerBase.pageSize[e-1].height,o=(this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(n-t)*this.pdfViewerBase.getZoomFactor()).toString();return i.pdfViewerBase.viewerContainer.scrollTop=parseInt(o),i.pdfViewerBase.focusViewerContainer(),!1},e.prototype.clear=function(){if(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose(),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),null!=this.bookmarkView)for(;this.bookmarkView.hasChildNodes();)this.bookmarkView.removeChild(this.bookmarkView.lastChild)},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"BookmarkView"},e}(),x=function(){function e(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.onLeftTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onRightTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onLeftTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementRight,o=i.isTouchedWithinContainer(e);if(n&&o){var r=n.getBoundingClientRect(),s=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,a,e,t)){var l=Math.sqrt((a-r.top)*(a-r.top)+(s-r.left)*(s-r.left)),h=i.isCloserTouchScroll(l),d=!1;if(a<=r.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",d=i.selectTextByTouch(t.parentElement,s,a,!1,"left",h)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",d=i.selectTextByTouch(t.parentElement,s,a,!0,"left",h)),d){var p=i.dropDivElementLeft.getBoundingClientRect(),c=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,u=i.getClientValueTop(a,i.pdfViewerBase.currentPageNumber-1),f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=c*i.pdfViewerBase.getZoomFactor()+u+"px",i.topStoreLeft={pageTop:c,topClientValue:i.getMagnifiedValue(u),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementLeft.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-p.width/2+"px",i.previousScrollDifference=l}}}},this.onRightTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementLeft,o=i.isTouchedWithinContainer(e);if(n&&o){var r=n.getBoundingClientRect(),s=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,a,e,t)){var l=Math.sqrt((a-r.top)*(a-r.top)+(s-r.left)*(s-r.left)),h=i.isCloserTouchScroll(l),d=!1;if(a>=r.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",d=i.selectTextByTouch(t.parentElement,s,a,!0,"right",h)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",d=i.selectTextByTouch(t.parentElement,s,a,!1,"right",h)),d){var p=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,c=i.getClientValueTop(a,i.pdfViewerBase.currentPageNumber-1),u=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=p*i.pdfViewerBase.getZoomFactor()+c+"px";var f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:p,topClientValue:i.getMagnifiedValue(c),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementRight.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-u.width/2+"px",i.previousScrollDifference=l}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.textSelectionOnMouseMove=function(e,t,i){var n=e;if(n.nodeType===n.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var o=n.ownerDocument.createRange(),r=window.getSelection();if(null!==r.anchorNode){var s=r.anchorNode.compareDocumentPosition(r.focusNode);(!s&&r.anchorOffset>r.focusOffset||s===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}o.selectNodeContents(n);for(var a=0,l=o.endOffset;a<l;)o.setStart(n,a),o.setEnd(n,a+1),(d=o.getBoundingClientRect()).left<=t&&d.right>=t&&d.top<=i&&d.bottom>=i&&(null!==r.anchorNode&&r.anchorNode.parentNode.classList.contains("e-pv-text")&&o.setStart(r.anchorNode,r.anchorOffset),r.removeAllRanges(),r.addRange(o),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,this.isBackwardPropagatedSelection?r.extend(n,a):r.extend(n,a+1),o.detach()),a+=1}else for(var h=0;h<n.childNodes.length;h++)if(n.childNodes[h].nodeType===n.TEXT_NODE){var d=(o=this.getSelectionRange(h,n)).getBoundingClientRect();d.left<=t&&d.right>=t&&d.top<=i&&d.bottom>=i?(o.detach(),this.textSelectionOnMouseMove(n.childNodes[h],t,i)):o.detach()}},e.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault();var i=this.pdfViewerBase.viewerContainer.offsetTop;this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(e.clientY>i?this.scrollMoveTimer=setInterval(function(){t.scrollForwardOnSelection()},500):this.scrollMoveTimer=setInterval(function(){t.scrollBackwardOnSelection()},500))},e.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},e.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var o=window.getSelection();(u=e.ownerDocument.createRange()).selectNodeContents(e);for(var r=0,s=u.endOffset;r<s;){if(u.setStart(e,r),u.setEnd(e,r+1),(f=u.getBoundingClientRect()).left<=t&&f.right>=t&&f.top<=i&&f.bottom>=i){for(var a=e.textContent,l=[],h=void 0,d=void 0,p=0;p<a.length;p++)" "===a[p]&&l.push(p);for(var c=0;c<l.length;c++){if(r===l[c]&&(h=l[c],d=l[c]),l[0]>r){h=0,d=l[c];break}r>l[c]&&r<l[c+1]?(h=l[c],d=l[c+1]):r>l[c]&&(l[c+1]||(h=l[c]))}d||(d=a.length),0===h?u.setStart(e,h):u.setStart(e,h+1),u.setEnd(e,d),o.removeAllRanges(),o.addRange(u),this.isTextSelection=!0,this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),n&&(this.selectionAnchorTouch={anchorNode:o.anchorNode.parentElement.id,anchorOffset:o.anchorOffset},this.selectionFocusTouch={focusNode:o.focusNode.parentElement.id,focusOffset:o.focusOffset}),u.detach();break}r+=1}}else for(p=0;p<e.childNodes.length;p++){var u=this.getSelectionRange(p,e),f=u.getBoundingClientRect();f.left<=t&&f.right>=t&&f.top<=i&&f.bottom>=i?(u.detach(),this.selectAWord(e.childNodes[p],t,i,n)):u.detach()}},e.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},e.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),o=parseInt((n.top+n.height/2).toString()),r=parseInt(e.target.id.split("_text_")[1]),s=document.querySelectorAll('div[id*="_text_'+r+'"]');if(i.classList.contains("e-pv-text")){for(var a=0;a<s.length;a++){var l=s[a].getBoundingClientRect(),h=parseInt(l.top.toString()),d=parseInt(l.bottom.toString());if(h<=o&&d>o&&n.bottom+10>d){var p=s[a].id;""!==p&&t.push(p)}}var c=window.getSelection();c.removeAllRanges();var u=document.createRange(),f=t.length-1,m=document.getElementById(t[0]),g=document.getElementById(t[f]);g.childNodes.length>0?(u.setStart(m.childNodes[0],0),u.setEnd(g.childNodes[0],g.textContent.length)):(u.setStart(m.childNodes[0],0),u.setEnd(g,1)),this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),c.addRange(u),this.isTextSelection=!0}},e.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",function(){return!0})},e.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.close(),this.removeTouchElements()}},e.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},e.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){var t=this.dropDivElementRight.getBoundingClientRect(),i=0,o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},e.prototype.textSelectionOnMouseup=function(){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.maintainSelectionOnZoom(!0,!1),this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var e=this.pdfViewer.textSearchModule.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<i;n++)this.applySelectionRangeOnScroll(n);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.removeTouchElements()},e.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.isBackWardSelection(i);if(null!==i.anchorNode){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),r=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(r)&&i.focusNode===this.pdfViewerBase.pageContainer){var s=this.pdfViewerBase.pageContainer.lastChild;s.classList.contains("e-pv-touch-select-drop")?r=parseInt(s.previousSibling.previousSibling.id.split("_pageDiv_")[1]):s.classList.contains("e-pv-page-div")&&(r=parseInt(s.id.split("_pageDiv_")[1]))}if(n)for(a=o;a>=r;a--)this.maintainSelectionOnScroll(a,t);else for(var a=o;a<=r;a++)this.maintainSelectionOnScroll(a,t)}e||i.removeAllRanges()}},e.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},e.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},e.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,o=0;o<n.length;o++)if(null!==n[o]&&e===n[o].pageNumber){i=n[o],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},e.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var o=t.selectionRange,r=void 0,s=void 0,a=void 0,l=void 0;if(o.isBackward){var h=parseInt(o.endNode.split("_text_")[1].split("_")[1]),d=parseInt(o.startNode.split("_text_")[1].split("_")[1]);h<d?(r=h,a=o.endOffset,l=o.startOffset,s=d):(r=d,a=o.startOffset,s=h,l=o.endOffset)}else r=parseInt(o.startNode.split("text_")[1].split("_")[1]),s=parseInt(o.endNode.split("text_")[1].split("_")[1]),a=o.startOffset,l=o.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,r,s,a,l),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var i=t.selectionRange,n=window.getSelection(),o=document.getElementById(i.startNode).childNodes[0],r=document.getElementById(i.endNode).childNodes[0],s=document.createRange();if(null===n.anchorNode)i.isBackward?(s.setStart(r,i.endOffset),s.setEnd(o,i.startOffset)):(s.setStart(o,i.startOffset),s.setEnd(r,i.endOffset));else{var a=isNaN(parseInt(n.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(n.anchorNode.id.split("_pageDiv_")[1]):parseInt(n.anchorNode.parentElement.id.split("_text_")[1]);isNaN(a)&&(a=parseInt(n.anchorNode.id.split("_text_")[1]));var l=isNaN(parseInt(n.focusNode.parentElement.id.split("_text_")[1]))?parseInt(n.focusNode.id.split("_pageDiv_")[1]):parseInt(n.focusNode.parentElement.id.split("_text_")[1]),h=parseInt(i.startNode.split("_text_")[1]);if(a===l&&a===h)i.isBackward?(s.setStart(r,i.endOffset),s.setEnd(o,i.startOffset)):(s.setStart(o,i.startOffset),s.setEnd(r,i.endOffset));else if(i.isBackward){var d=this.isBackWardSelection(n);if(a>h&&h>l&&a!==l)d?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(a<h&&h<l&&a!==l)d?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(a<h)d?h!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(r.parentElement,i.endOffset,n,s):this.extendCurrentSelection(o.parentElement,i.startOffset,n,s):h!==this.selectionRangeArray[0].pageNumber?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(r,i.endOffset)):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(o,i.startOffset));else if(a===h)h===l?(s.setStart(o,i.startOffset),s.setEnd(o,i.startOffset),n.removeAllRanges(),n.addRange(s),s=document.createRange(),n.extend(r,i.endOffset)):d?this.extendCurrentSelection(r.parentElement,i.endOffset,n,s):(s.setStart(r,i.endOffset),s.setEnd(n.focusNode,n.focusOffset));else if(l===h)d?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(a>h){var p=parseInt(i.startNode.split("_"+h+"_")[1]),c=parseInt(i.endNode.split("_"+h+"_")[1]);d?h!==this.selectionRangeArray[0].pageNumber?p<c?this.extendCurrentSelection(o.parentElement,i.startOffset,n,s):(s.setStart(r.parentElement,i.endOffset),s.setEnd(n.anchorNode,n.anchorOffset)):this.extendCurrentSelection(r.parentElement,i.endOffset,n,s):p<c?(s.setStart(o,i.startOffset),s.setEnd(n.focusNode,n.focusOffset)):(s.setStart(r,i.endOffset),s.setEnd(n.focusNode,n.focusOffset))}}else a<h&&h<l&&a!==l?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset)):a<h?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(r,i.endOffset)):(s.setStart(o,i.startOffset),s.setEnd(n.focusNode,n.focusOffset))}""!==s.toString()&&(n.removeAllRanges(),n.addRange(s))}},e.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},e.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(o)&&null!==i.anchorNode)if(this.isBackWardSelection(i))o=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var r=this.pdfViewerBase.pageContainer.lastChild;o=r.classList.contains("e-pv-touch-select-drop")?parseInt(r.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(r.id.split("_pageDiv_")[1])}var s=this.isBackWardSelection(i);if(this.isTouchSelection&&e>o&&e>n)return;if(n===o){var a=null,l=this.getSelectionBounds(i.getRangeAt(0),e),h=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),d=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);a={isBackward:s,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:h,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:d,textContent:i.toString(),pageNumber:e,bounds:l},this.pushSelectionRangeObject(a,e)}else(a=this.createRangeObjectOnScroll(e,n,o))&&(this.pushSelectionRangeObject(a,e),t&&this.stichSelection(s,i,e))}},e.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),o=0;o<n.childNodes.length;o++){if(n.childNodes[o]===e){i+=t;break}i+=n.childNodes[o].textContent.length}return i},e.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter(function(e){return e.pageNumber===t});if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var o=this.selectionRangeArray.filter(function(e){return e.pageNumber===t+1});if(0===o.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var r=this.selectionRangeArray.filter(function(e){return e.pageNumber===t-1});if(0!==r.length){var s=this.selectionRangeArray.indexOf(r[0]);this.selectionRangeArray.splice(s+1,0,e)}else{var a=this.selectionRangeArray[0];t<a.pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}}else this.selectionRangeArray.push(e);else{var l=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(l,0,e)}},e.prototype.extendCurrentSelection=function(e,t,i,n){var o=i.focusOffset,r=i.focusNode.parentElement.id,s=isNaN(parseInt(r.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(r.split("_text_")[1]);isNaN(parseInt(r.split("_text_")[1]))&&(r=this.pdfViewerBase.getElement("_textLayer_"+(s+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(r).childNodes[0],o)},e.prototype.stichSelection=function(e,t,i){var n,o=document.createRange();if(e)if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-1)))(r=n.lastChild)?this.extendCurrentSelection(r,this.getTextLastLength(r),t,o):(r=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-2))).lastChild,this.extendCurrentSelection(r,this.getTextLastLength(r),t,o));else{var r=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))).firstChild;this.extendCurrentSelection(r,0,t,o)}else if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))){var s=n.firstChild;s?o.setStart(s.childNodes[0],0):(s=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+2))).firstChild,o.setStart(s.childNodes[0],0)),o.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(o)}},e.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},e.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),o=void 0;if(i!==e&&n!==e)if(this.isBackWardSelection(t)){if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1))){var r=o.firstChild;r&&this.extendSelectionStich(r.childNodes[0],0,t)}}else if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1)))if(r=o.lastChild)this.extendSelectionStich(r.childNodes[0],this.getTextLastLength(r),t);else{var s=(o=this.pdfViewerBase.getElement("_textLayer_"+e)).firstChild;this.extendSelectionStich(s.childNodes[0],0,t)}this.maintainSelectionArray()}},e.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},e.prototype.createRangeObjectOnScroll=function(e,t,i){var n=window.getSelection();if(null!==n.anchorNode){var o=this.isBackWardSelection(n),r=void 0,s=void 0,a=void 0,l=void 0,h=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(h.childNodes){if(o?e===t?(r=this.getNodeElementFromNode(n.anchorNode),s=h.firstChild,a=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=0):e<t&&e>i?(r=h.firstChild,s=h.lastChild,a=0,l=this.getTextLastLength(s)):e===i&&(r=this.getNodeElementFromNode(n.focusNode),s=h.lastChild,a=this.getCorrectOffset(n.focusNode,n.focusOffset),l=this.getTextLastLength(s)):e===t?(r=this.getNodeElementFromNode(n.anchorNode),s=h.lastChild,a=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=this.getTextLastLength(s)):e>t&&e<i?(r=h.firstChild,s=h.lastChild,a=0,l=this.getTextLastLength(s)):e===i&&(r=h.firstChild,-1!==this.getNodeElementFromNode(n.focusNode).id.indexOf(i.toString())?(s=this.getNodeElementFromNode(n.focusNode),l=this.getCorrectOffset(n.focusNode,n.focusOffset)):(s=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+i).lastChild,l=this.getTextLastLength(s)),a=0),r&&s){var d=this.getSelectionRangeObject(r.id,a,s.id,l,e),p=d.toString(),c=this.getSelectionBounds(d,e);return{isBackward:o,startNode:r.id,startOffset:a,endNode:s.id,endOffset:l,textContent:p,pageNumber:e,bounds:c}}return null}}return null},e.prototype.getSelectionRangeObject=function(e,t,i,n,o){var r=document.getElementById(e).childNodes[0],s=document.getElementById(i).childNodes[0],a=parseInt(e.split("_"+o+"_")[1]),l=parseInt(i.split("_"+o+"_")[1]),h=document.createRange();return a<l?(h.setStart(r,t),h.setEnd(s,n)):(h.setStart(s,n),h.setEnd(r,t)),h},e.prototype.getSelectionBounds=function(e,t){var i=[];if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var n=document.createRange(),o=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,n);i.push(this.normalizeBounds(o.getBoundingClientRect(),t))}else i.push(this.normalizeBounds(e.getBoundingClientRect(),t));return i},e.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},e.prototype.normalizeBounds=function(e,t){var i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect();return{bottom:this.getMagnifiedValue(e.bottom-i.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-i.left),top:this.getMagnifiedValue(e.top-i.top),right:this.getMagnifiedValue(e.right-i.left),width:this.getMagnifiedValue(e.height)}},e.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bounds);return t},e.prototype.createRangeForSelection=function(e,t,i,n,o){return o.setStart(e,i),o.setEnd(t,n),o},e.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(t.anchorNode.parentElement.id.split("_text_")[1]);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1]));var o=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(t.focusNode.parentElement.id.split("_text_")[1]);isNaN(o)&&(o=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var r=[];if((r=i?this.selectionRangeArray.filter(function(t){return!(o<t.pageNumber&&t.pageNumber<=e.selectionStartPage)}):this.selectionRangeArray.filter(function(t){return!(e.selectionStartPage<=t.pageNumber&&t.pageNumber<o)})).length>0){for(var s=0;s<r.length;s++){var a=this.selectionRangeArray.indexOf(r[s]);-1!==a&&this.selectionRangeArray.splice(a,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber!==n&&this.selectionRangeArray[0].pageNumber!==o||(r=[]))}}},e.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},e.prototype.applySpanForSelection=function(){var e=window.getSelection();if(null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var t=void 0,i=void 0,n=void 0,o=void 0,r=void 0,s=void 0;if(this.isBackWardSelection(e))t=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),i=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),o=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),r=e.focusOffset,s=e.anchorOffset;else{var a=this.getNodeElementFromNode(e.anchorNode),l=this.getNodeElementFromNode(e.focusNode);t=-1!==a.id.indexOf("text_")?parseInt(a.id.split("text_")[1]):parseInt(a.id.split("_textLayer_")[1]),i=-1!==l.id.indexOf("text_")?parseInt(l.id.split("text_")[1]):parseInt(l.id.split("_textLayer_")[1]);var h=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var d=this.pdfViewerBase.pageContainer.lastChild;if(d.classList.contains("e-pv-touch-select-drop")){p=d.previousSibling.previousSibling;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,h=!0}else if(d.classList.contains("e-pv-page-div")){var p=d;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,h=!0}}a.classList.contains("e-pv-maintaincontent")&&(a=this.getNodeElementFromNode(a),t=parseInt(a.id.split("text_")[1])),l.classList.contains("e-pv-maintaincontent")&&(l=this.getNodeElementFromNode(l),i=parseInt(l.id.split("text_")[1])),t===i&&(a.contains(l)&&(a=l),l.contains(a)&&(l=a)),n=a.id.split("text_")[1]?parseInt(a.id.split("text_")[1].split("_")[1]):null,o=l.id.split("text_")[1]?parseInt(l.id.split("text_")[1].split("_")[1]):null,n=isNaN(n)?o:n,o=isNaN(o)?n:o,r=e.anchorOffset,s=h?l.textContent.length:e.focusOffset}e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(t,i,n,o,r,s),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.initiateTouchSelection=function(e,t,i){var n=e.target,o=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==o.length&&o[0].classList.contains("e-pv-hyperlink")&&o[1].classList.contains("e-pv-text")&&(n=o[1]),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection()},e.prototype.selectTextByTouch=function(e,t,i,n,o,r){var s=!1;if(e.nodeType===e.TEXT_NODE){var a=e.ownerDocument.createRange(),l=window.getSelection();a.selectNodeContents(e);for(var h=0,d=a.endOffset;h<d;){if(a.setStart(e,h),a.setEnd(e,h+1),(u=a.getBoundingClientRect()).left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return null!=l.anchorNode&&(n&&a.setStart(l.anchorNode,l.anchorOffset),a=this.setTouchSelectionStartPosition(l,a,n,o,e,h,r),n&&l.extend(e,h),s=!0),a.detach(),s;h+=1}}else for(var p=0;p<e.childNodes.length;p++){var c=e.childNodes[p].ownerDocument.createRange();c.selectNodeContents(e.childNodes[p]);var u=c.getBoundingClientRect();if(u.left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return c.detach(),this.selectTextByTouch(e.childNodes[p],t,i,n,o,r);c.detach()}return s},e.prototype.setTouchSelectionStartPosition=function(e,t,i,n,o,r,s){if(i){if("left"===n){a=this.getTouchFocusElement(e,!0);t.setStart(a.focusNode,a.focusOffset),t.setEnd(o,r),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else if("right"===n){a=this.getTouchAnchorElement(e,!1);t.setStart(a.anchorNode,a.anchorOffset),t.setEnd(o,r),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset}}}else if("left"===n)if(s)t.setStart(o,r),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset};else{a=this.getTouchFocusElement(e,!1);t.setStart(o,r),t.setEnd(a.focusNode,a.focusOffset),""===t.toString()&&(t.setStart(o,r),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}}else if("right"===n){var a=this.getTouchAnchorElement(e,!0);t.setStart(o,r),t.setEnd(a.anchorNode,a.anchorOffset),""===t.toString()&&(t.setStart(a.anchorNode,a.anchorOffset),t.setEnd(o,r)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset}}return e.removeAllRanges(),e.addRange(t),t},e.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(n=e.focusNode,o=e.focusOffset):(n=e.anchorNode,o=e.anchorOffset),{anchorNode:n,anchorOffset:o}},e.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(n=e.anchorNode,o=e.anchorOffset):(n=e.focusNode,o=e.focusOffset),{focusNode:n,focusOffset:o}},e.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var i=window.getSelection();if("Range"===i.type){this.dropDivElementLeft=t.createElement("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=t.createElement("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=t.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=t.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var n=i.getRangeAt(0).getBoundingClientRect(),o=this.dropDivElementLeft.getBoundingClientRect(),r=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,s=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,a=this.getClientValueTop(n.top,this.pdfViewerBase.currentPageNumber-1),l=a+r*this.pdfViewerBase.getZoomFactor()+o.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=l,this.dropDivElementLeft.style.left=n.left-(s+o.width)+"px",this.dropDivElementRight.style.top=l,this.dropDivElementRight.style.left=n.left+n.width-s+"px";var h=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,d=n.left-h;this.topStoreLeft={pageTop:r,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d),isHeightNeeded:!0},this.topStoreRight={pageTop:r,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d+n.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.pdfViewerBase.contextMenuModule.contextMenuObj.open(e.touches[0].clientY-this.pdfViewerBase.viewerContainer.offsetTop,e.touches[0].clientX-this.pdfViewerBase.viewerContainer.clientLeft,this.pdfViewerBase.viewerContainer)}},e.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.close();var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}},e.prototype.terminateSelectionByTouch=function(e){this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.contextMenuModule.contextMenuObj.open(e.changedTouches[0].clientY-this.pdfViewerBase.viewerContainer.offsetTop+this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight,e.changedTouches[0].clientX-this.pdfViewerBase.viewerContainer.offsetLeft,this.pdfViewerBase.viewerContainer)},e.prototype.getNodeElement=function(e,t,i,n,o){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),o=this.onTouchElementScroll(e,o,i,n);else if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(t,i),s=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(r.offsetNode,r.offset),e.setEnd(s.offsetNode,s.offset),o=this.onTouchElementScroll(e,o,i,n)}return o},e.prototype.isTouchedWithinContainer=function(e){var t=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(t=!0),t},e.prototype.onTouchElementScroll=function(e,t,i,n){var o=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var r=this.isScrolledOnScrollBar(n);this.pdfViewerBase.viewerContainer.contains(t.parentElement)&&!r||(i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30)}else i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30;return t},e.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},e.prototype.getClientValueTop=function(e,t){return e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top},e.prototype.isScrolledOnScrollBar=function(e){var t=!1;return this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},e.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},e.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},e.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{i&&document.body.removeChild(i)}}},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"TextSelection"},e}(),T=function(){function e(e,t){var i=this;this.isTextSearch=!1,this.searchIndex=0,this.currentSearchIndex=0,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.checkBoxOnChange=function(e){if(e.checked?i.isMatchCase=!0:i.isMatchCase=!1,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var t=i.searchInput.value;i.searchIndex=0,i.textSearch(t)}},this.searchKeypressHandler=function(e){i.enableNextButton(!0),i.enablePrevButton(!0),13===e.which?(i.initiateTextSearch(),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(e){i.searchBtn.classList.contains("e-pv-search-icon")?i.initiateTextSearch():i.searchBtn.classList.contains("e-pv-search-close")&&(i.searchInput.value="",i.resetTextSearch(),i.searchInput.focus())},this.nextButtonOnClick=function(e){i.nextSearch()},this.prevButtonOnClick=function(e){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createTextSearchBox=function(){var e=this;this.searchBox=t.createElement("div",{id:this.pdfViewer.element.id+"_search_box",className:"e-pv-search-bar"});var i=t.createElement("div",{id:this.pdfViewer.element.id+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=t.createElement("div",{id:this.pdfViewer.element.id+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=t.createElement("input",{id:this.pdfViewer.element.id+"_search_input",className:"e-input"}),this.searchInput.type="text",this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant("Find in document"),this.searchBtn=t.createElement("span",{id:this.pdfViewer.element.id+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-prev-search"),i.appendChild(this.prevSearchBtn),this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-next-search"),i.appendChild(this.nextSearchBtn);var o=t.createElement("div",{id:this.pdfViewer.element.id+"_match_case_container",className:"e-pv-match-case-container"}),r=t.createElement("input",{id:this.pdfViewer.element.id+"_match_case"});r.type="checkbox",o.appendChild(r),this.searchBox.appendChild(i),this.searchBox.appendChild(o),this.pdfViewerBase.mainContainer.appendChild(this.searchBox),this.checkBox=new s.CheckBox({cssClass:"e-pv-match-case",label:this.pdfViewer.localeObj.getConstant("Match case"),change:this.checkBoxOnChange.bind(this)}),this.checkBox.appendTo(r),this.showSearchBox(!1),this.searchBox.style.right="88.3px",this.searchInput.addEventListener("focus",function(){e.searchInput.parentElement.classList.add("e-input-focus")}),this.searchInput.addEventListener("blur",function(){e.searchInput.parentElement.classList.remove("e-input-focus")}),this.searchInput.addEventListener("keypress",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},e.prototype.textSearchBoxOnResize=function(){this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},e.prototype.showSearchBox=function(e){this.searchBox.style.display=e?"block":"none",this.onTextSearchClose()},e.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},e.prototype.initiateTextSearch=function(){var e=this.searchInput.value;e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchCollection[this.searchPageIndex]&&e===this.searchString?0===this.searchCollection[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},e.prototype.textSearch=function(e){(""!==e||e)&&(this.searchString=e,this.isTextSearch=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.initSearch(this.searchPageIndex,!1),this.highlightOthers())},e.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchCollection[this.searchPageIndex]?(this.searchIndex>=this.searchCollection[this.searchPageIndex].length||this.searchPageIndex!==this.pdfViewerBase.currentPageNumber-1?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.initSearch(this.searchPageIndex,!1)):this.highlightSearchedTexts(this.searchPageIndex,!1),this.highlightOthers()):this.initiateTextSearch()):this.initiateTextSearch()},e.prototype.prevSearch=function(){if(this.isPrevSearch=!0,this.isTextSearch=!0,this.searchString)this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1)):this.highlightSearchedTexts(this.searchPageIndex,!1),this.highlightOthers();else{this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var e=this.searchInput.value;this.textSearch(e)}},e.prototype.initSearch=function(e,t){var i=this.pdfViewerBase.getStoredData(e),n=null,o=null;i?(n=i.pageText,o=i.textContent,this.textContents[e]=o,this.getPossibleMatches(e,this.searchString,n,o,t)):t||this.createRequestForSearch(e)},e.prototype.getPossibleMatches=function(e,t,i,n,o){var r=i,s=t,a=t.length;this.isMatchCase||(s=t.toLowerCase(),r=i.toLowerCase());for(var l=[],h=-a;0!==h&&""!==s&&" "!==s&&s&&-1!==(h=r.indexOf(s,h+a));)l.push(h);if(this.searchMatches[e]=l,o||(-1===this.searchedPages.indexOf(e)&&this.searchedPages.push(e),this.updateSearchInputIcon(!1)),0!==this.searchMatches[e].length)o||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&(this.searchCollection.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex&&(this.isMessagePopupOpened||(this.onMessageBoxOpen(),this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches"))),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex))),this.convertMatches(e,a,n,o);else if(!o)if(this.isPrevSearch?this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,-1===this.searchedPages.indexOf(this.searchPageIndex)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.initSearch(this.searchPageIndex,!1);else{var d=this.getSearchPage(e);this.searchCollection[this.searchPageIndex]||0!==this.searchCollection.length||this.searchedPages.length!==this.pdfViewerBase.pageCount?this.searchCollection.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&d===this.currentSearchIndex&&(this.isPrevSearch?(this.isMessagePopupOpened||(this.onMessageBoxOpen(),this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches"))),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[],this.searchIndex=-1):(this.isMessagePopupOpened||(this.onMessageBoxOpen(),this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches"))),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,o)):this.isMessagePopupOpened||(this.onMessageBoxOpen(),this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches")))}},e.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(i=e;i>=0;i--)if(i!==e&&this.searchCollection[i]){t=i;break}if(!t)for(n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchCollection[n]){t=n;break}}else{for(var i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchCollection[i]){t=i;break}if(!t)for(var n=0;n<e;n++)if(this.searchCollection[n]){t=n;break}}return t},e.prototype.convertMatches=function(e,t,i,n){for(var o=0,r=this.searchMatches[e],s=0,a=i.length-1,l=[],h=0;h<r.length;h++){for(var d=r[h];o!==a&&d>=s+i[o].split("\r\n")[0].length;)s+=i[o].split("\r\n")[0].length,o++;var p={begin:{divId:o,offsetValue:d-s}};for(d+=t;o!==a&&d>s+i[o].length;)s+=i[o].length,o++;p.end={divId:o,offsetValue:d-s},l.push(p)}0===this.searchCollection.length&&(this.currentSearchIndex=e),this.searchCollection[e]=l,this.highlightSearchedTexts(e,n)},e.prototype.highlightSearchedTexts=function(e,t){for(var i,n,o=this.searchCollection[e],r=null,s={y:-100,x:-400},a=0;a<o.length;a++){var l=o[a],h=l.begin,d=l.end;if(a===this.searchIndex&&e===this.searchPageIndex?(n="e-pv-search-text-highlight",i=h.divId):n="e-pv-search-text-highlightother",r&&h.divId===r.divId?this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),parseFloat(h.offsetValue.toString()),null):(null!==r&&this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),void 0,null),this.beginText(h,e,null)),h.divId===d.divId)this.addSpanForSearch(e,h.divId,h.offsetValue,d.offsetValue,n);else{this.addSpanForSearch(e,h.divId,h.offsetValue,void 0,n);for(var p=h.divId+1;p<d.divId;p++)this.addSpanForSearch(e,p,0,void 0,n+" middle");this.beginText(d,e,n)}r=d}if(r&&this.addSpanForSearch(e,parseFloat(r.divId.toString()),parseFloat(r.offsetValue.toString()),void 0,null),e===this.searchPageIndex&&!t){var c=this.pdfViewerBase.getElement("_text_"+e+"_"+i);if(c)this.scrollToSearchStr(c,s);else{this.pdfViewerBase.updateScrollTop(e);var u=this.pdfViewerBase.getElement("_text_"+e+"_"+i);this.scrollToSearchStr(u,s)}}},e.prototype.beginText=function(e,t,i){var n=parseFloat(e.divId),o=this.pdfViewerBase.getElement("_text_"+t+"_"+n);if(o){this.tempElementStorage=new Array;for(var r=0;r<o.childNodes.length;r++){var s={text:o.childNodes[r].textContent,classString:o.childNodes[r].className};this.tempElementStorage.push(s)}o.textContent="",this.addSpanForSearch(t,n,0,e.offsetValue,i)}},e.prototype.addSpanForSearch=function(e,t,i,n,o){var r,s=this.pdfViewerBase.getElement("_text_"+e+"_"+t);if(s){r=this.textContents[e][t].substring(i,n);var a=document.createTextNode(r);if(o){var l=document.createElement("span");l.className=o,l.classList.contains("middle")&&(s.textContent=""),l.appendChild(a),s.appendChild(l)}else this.pdfViewer.textSelectionModule.isTextSelection?this.searchOnSelection(s,a,r):s.appendChild(a)}},e.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},e.prototype.addSpan=function(e,t){var i=document.createTextNode(e),n=document.createElement("span");n.className="e-pv-maintaincontent",n.appendChild(i),t.appendChild(n)},e.prototype.searchOnSelection=function(e,t,i){if(1===this.tempElementStorage.length)this.tempElementStorage[0].classString?-1!==this.tempElementStorage[0].classString.indexOf("e-pv-maintaincontent")&&this.addSpan(t.textContent,e):e.appendChild(t);else if(this.tempElementStorage.length>1)for(var n=0;n<this.tempElementStorage.length;n++)if(this.tempElementStorage[n].classString){if(-1!==this.tempElementStorage[n].classString.indexOf("e-pv-maintaincontent")){if(this.tempElementStorage[n].text===t.textContent){this.addSpan(t.textContent,e);break}if(this.tempElementStorage[n].text!==t.textContent){var o=t.textContent,r=(this.isClassAvailable(),void 0);if(r=i.substring(0,this.tempElementStorage[n].text.length),-1!==this.tempElementStorage[n].text.indexOf(o)&&!this.tempElementStorage[n].classString){this.addSpan(o,e);break}if(-1!==this.tempElementStorage[n].text.indexOf(r)&&this.tempElementStorage[n].classString&&""!==r){if(-1!==this.tempElementStorage[n].classString.indexOf("e-pv-maintaincontent")){this.addSpan(r,e);var s=i.substring(this.tempElementStorage[n].text.length,i.length);this.tempElementStorage[n+1]&&(-1===this.tempElementStorage[n+1].text.indexOf(s)||this.tempElementStorage[n+1].classString||""===s||(t.textContent=s,e.appendChild(t)));break}}else if(this.tempElementStorage[n+1]){if(i===this.tempElementStorage[n].text+this.tempElementStorage[n+1].text){this.addSpan(this.tempElementStorage[n].text,e),t.textContent=this.tempElementStorage[n+1].text,e.appendChild(t);break}if(-1!==this.tempElementStorage[n].text.indexOf(i)){this.addSpan(i,e);break}var a=this.tempElementStorage[n].text.substring(e.textContent.length,o.length);if(-1!==this.tempElementStorage[n].text.indexOf(a)&&this.tempElementStorage[n].classString&&""!==a&&!this.tempElementStorage[n+1].classString&&-1!==i.indexOf(a)){this.addSpan(a,e);continue}}else{if(-1!==this.tempElementStorage[n].text.indexOf(i)){this.addSpan(t.textContent,e);break}-1!==this.tempElementStorage[n].text.indexOf(i.replace("\r\n",""))&&this.addSpan(i,e)}}}}else if(this.tempElementStorage[n].text!==t.textContent){if(""!==(o=t.textContent)){r=void 0;if((r=this.isClassAvailable()?i.substring(0,this.tempElementStorage[n].text.length):i.substring(0,this.tempElementStorage[n].text.length-e.textContent.length))===o&&!this.tempElementStorage[n].classString&&-1!==this.tempElementStorage[n].text.indexOf(r)){t.textContent=r,e.appendChild(t);break}if(-1!==this.tempElementStorage[n].text.indexOf(r)&&this.tempElementStorage[n].classString){if(-1!==this.tempElementStorage[n].classString.indexOf("e-pv-maintaincontent")){this.addSpan(r,e);break}}else if(this.tempElementStorage[n+1]){var l=o.substring(this.tempElementStorage[n].text.length,o.length),h=this.tempElementStorage[n+1].text.substring(0,l.length);if(o===r+this.tempElementStorage[n+1].text){t.textContent=r,e.appendChild(t),this.addSpan(this.tempElementStorage[n+1].text,e);break}if(o===r+h&&""!==h){t.textContent=r,e.appendChild(t),this.addSpan(l,e);break}if(-1!==this.tempElementStorage[n].text.indexOf(r)&&!this.tempElementStorage[n].classString&&""!==r){var d=i.substring(0,r.length);t.textContent=d,e.appendChild(t);var p=i.substring(r.length,i.length);""!==p&&-1!==this.tempElementStorage[n+1].text.indexOf(p)&&this.tempElementStorage[n+1].classString&&this.addSpan(p,e);break}}else{if(-1!==this.tempElementStorage[n].text.indexOf(o)&&!this.tempElementStorage[n].classString){t.textContent=o,e.appendChild(t);break}if(-1!==this.tempElementStorage[n].text.indexOf(o.replace("\r\n",""))&&!this.tempElementStorage[n].classString){t.textContent=o,e.appendChild(t);break}if(-1!==i.indexOf(this.tempElementStorage[n].text)){t.textContent=this.tempElementStorage[n].text,e.appendChild(t);break}}}}else e.appendChild(t);else e.appendChild(t)},e.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,o+=t.x,this.pdfViewerBase.getZoomFactor()>1.5&&(i.scrollLeft=o)),i.scrollTop=n},e.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},e.prototype.highlightOthers=function(){for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.highlightOtherOccurrences(n)},e.prototype.clearAllOccurrences=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.applyTextSelection()},e.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;return t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1,{lowerPageValue:e,higherPageValue:t}},e.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},e.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1)},e.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},e.prototype.createRequestForSearch=function(e){var t,i=this;t={xCoordinate:0,yCoordinate:0,pageNumber:e,documentId:this.pdfViewerBase.getDocumentId(),hashId:this.pdfViewerBase.hashId,zoomFactor:this.pdfViewerBase.getZoomFactor()};var n=new XMLHttpRequest;n.open("POST",this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderPages),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.send(JSON.stringify(t)),n.onreadystatechange=function(t){var o=i.pdfViewerBase;if(4===n.readyState&&200===n.status){var r=t.currentTarget.response;"object"!=typeof r&&(r=JSON.parse(r)),r&&r.pageText&&(o.storeWinData(r,e),i.initSearch(e,!1))}else 4===n.readyState&&400===n.status&&i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)},n.onerror=function(e){i.pdfViewerBase.openNotificationPopup(),i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText)}},e.prototype.createSearchBoxButtons=function(e,i){var n=t.createElement("button",{id:this.pdfViewer.element.id+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+i}),o=t.createElement("span",{id:this.pdfViewer.element.id+"_"+e+"Icon",className:"e-pv-icon-search "+i+"-icon"});return n.disabled=!0,n.appendChild(o),n},e.prototype.enablePrevButton=function(e){e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn.disabled=!0},e.prototype.enableNextButton=function(e){e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn.disabled=!0},e.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array,this.searchCollection=new Array},e.prototype.updateSearchInputIcon=function(e){e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close"))},e.prototype.onMessageBoxOpen=function(){this.pdfViewerBase.getElement("_search_input").blur(),this.isMessagePopupOpened=!0},e.prototype.searchText=function(e,t){this.searchString=e,this.isMatchCase=t,this.searchIndex=0,this.textSearch(e)},e.prototype.searchNext=function(){this.nextSearch()},e.prototype.searchPrevious=function(){this.prevSearch()},e.prototype.cancelTextSearch=function(){this.resetTextSearch()},e.prototype.destroy=function(){this.searchCollection=void 0},e.prototype.getModuleName=function(){return"TextSearch"},e}(),B=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.print=function(){var e,i=this;this.pdfViewerBase.pageCount>0&&(this.printViewerContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_print_viewer_container",className:"e-pv-print-viewer-container"}),this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="absolute",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open(),setTimeout(function(){for(e=0;e<=i.pdfViewerBase.pageCount;e++)if(e<i.pdfViewerBase.pageCount){var t=i.pdfViewerBase.pageSize[e].width,n=i.pdfViewerBase.pageSize[e].height;i.pdfViewer.printModule.createRequestForPrint(e,t,n,i.pdfViewerBase.pageCount)}else i.printWindowOpen()},100))},e.prototype.createRequestForPrint=function(e,i,n,o){var r=this,s=new XMLHttpRequest,a={pageNumber:e,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:1};s.open("POST",r.pdfViewer.serviceUrl+"/PrintImages",!1),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify(a));var l=s.responseText,h=new Image;h.src=l,h.height=n,h.width=i,this.printImageContainer=t.createElement("div",{id:this.pdfViewer.element.id+"_print_image_container"+e}),n<i&&(this.printImageContainer.style.height=i+"px",h.height=i,this.printImageContainer.style.width=n+"px",h.width=n),this.printImageContainer.appendChild(h),this.printViewerContainer.appendChild(this.printImageContainer)},e.prototype.printWindowOpen=function(){var e=this,t=navigator.userAgent;-1!==t.indexOf("Chrome")||-1!==t.indexOf("Safari")||-1!==t.indexOf("Firefox")?(this.frameDoc.document.write("<!DOCTYPE html>"),this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class="loader">')):(this.frameDoc.document.write("<!DOCTYPE html>"),this.frameDoc.document.write("<html><head><style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>")),this.frameDoc.document.write(this.printViewerContainer.outerHTML),this.pdfViewerBase.showPrintLoadingIndicator(!1),setTimeout(function(){e.iframe.contentWindow.print(),e.iframe.contentWindow.focus(),document.body.removeChild(e.iframe)},200)},e.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0},e.prototype.getModuleName=function(){return"Print"},e}();return e.LinkAnnotation=a,e.NavigationPane=l,e.PdfViewerBase=p,e.TextLayer=c,e.ContextMenu=u,e.Magnification=f,e.Navigation=m,e.ThumbnailView=g,e.Toolbar=w,e.ToolbarSettings=C,e.ServerActionSettings=y,e.PdfViewer=V,e.BookmarkView=S,e.TextSelection=x,e.TextSearch=T,e.Print=B,e}({},ej.base,ej.popups,ej.navigations,ej.inputs,ej.dropdowns,ej.buttons),this.ejs=ej;
//# sourceMappingURL=ej2-pdfviewer.min.js.map
