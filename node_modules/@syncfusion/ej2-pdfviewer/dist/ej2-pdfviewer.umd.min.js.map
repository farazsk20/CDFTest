{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageChildNodes = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).childNodes;\n            for (var i = 0; i < pageChildNodes.length; i++) {\n                var childElement = pageChildNodes[i];\n                if (childElement.tagName === 'A') {\n                    if (isAdd) {\n                        childElement.classList.add('e-pv-onselection');\n                    }\n                    else {\n                        childElement.classList.remove('e-pv-onselection');\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isBookmarkOpen = false;\n        this.isThumbnailOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY\n            ];\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            event.preventDefault();\n            if (proxy.isDown && _this.sideBarContentContainer) {\n                // prevent the sidebar from becoming too narrow, or from occupying more\n                // than half of the available viewer width.\n                var width = event.clientX + proxy.offset[0];\n                var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                if (width > maxWidth) {\n                    width = maxWidth;\n                }\n                if (width < _this.thumbnailWidthMin) {\n                    width = _this.thumbnailWidthMin;\n                }\n                proxy.sideBarResizer.style.left = width + 'px';\n                proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                proxy.sideBarContentContainer.style.width = width + 'px';\n                proxy.sideBarContent.style.width = width + 'px';\n                proxy.sideBarContentSplitter.style.width = width + 'px';\n                proxy.sideBarTitleContainer.style.width = width + 'px';\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                // tslint:disable-next-line:max-line-length\n                var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                proxy.pdfViewerBase.updateZoomValue();\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        // tslint:disable-next-line:max-line-length\n        var sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(sideBarToolbarSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content' });\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title' });\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        var resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        resizeIcon.style.position = 'absolute';\n        resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(resizeIcon);\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            // tslint:disable-next-line:max-line-length\n            proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            proxy.updateZoomValue();\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.scrollHoldTimer) {\n                    clearTimeout(_this.scrollHoldTimer);\n                    _this.scrollHoldTimer = null;\n                }\n                if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                    _this.pageViewScrollChanged(_this.currentPageNumber);\n                }\n            }\n            if (event.button === 0) {\n                // 0 is for left button.\n                var eventTarget = event.target;\n                if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                    var idStringArray = eventTarget.id.split('_');\n                    // tslint:disable-next-line\n                    _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                }\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grab';\n                    _this.viewerContainer.style.cursor = '-moz-grab';\n                    _this.viewerContainer.style.cursor = 'grab';\n                }\n            }\n            _this.isViewerMouseDown = false;\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        this.onWindowMouseUp = function (event) {\n            if (event.button === 0) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    // tslint:disable-next-line:max-line-length\n                    if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                        if (window.getSelection().anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                    }\n                    if (_this.viewerContainer.contains(event.target)) {\n                        if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                        else {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                            }\n                        }\n                    }\n                }\n            }\n            else if (event.button === 2) {\n                if (_this.viewerContainer.contains(event.target)) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (_this.isViewerMouseDown) {\n                _this.isViewerMouseDown = false;\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clear();\n                    _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1) {\n                _this.preventTouchEvent(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        this.viewerContainerOnScroll = function () {\n            var proxy = _this;\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.pdfViewer.toolbarModule.updateNavigationButtons();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container' });\n            this.viewerContainer.tabIndex = 0;\n            element.style.touchAction = 'pan-x pan-y';\n            element.style.minHeight = '500px';\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (this.pdfViewer.element.clientWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0));\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container' });\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            // this.createPasswordPopup();\n            this.createPrintPopup();\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        spinnerElement.style.height = '48px';\n        spinnerElement.style.width = '48px';\n        spinnerElement.style.transformOrigin = '24px 24px 24px';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (this.navigationPane.sideBarToolbar) {\n            this.navigationPane.clear();\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', content: '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container' });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container' });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup' });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ], close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * 2;\n                                canvas_1.width = pageWidth_1 * 2;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div' });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber);\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.left = leftPosition + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        jsonObject = { hashId: this.hashId };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    _this.downloadDocument(blobUrl);\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobUrl = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        var blob = new Blob(byteArrays, { type: contentType });\n        return URL.createObjectURL(blob);\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (!textDiv) {\n            // tslint:disable-next-line:max-line-length\n            var textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text' });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, textBounds);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, textBounds) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.bottom = bottom * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        if (textHeight > 11 && textBounds) {\n            textDiv.style.top = (parseFloat(textDiv.style.top) + 2) + 'px';\n            // tslint:disable-next-line:radix\n            textDiv.style.fontSize = (parseInt(height.toString()) * this.pdfViewerBase.getZoomFactor() - 2.6) + 'px';\n        }\n        else {\n            textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy') }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            cssClass: 'e-pv-context-menu'\n        });\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            for (var i = 0; i < bounds.length; i++) {\n                var currentBound = bounds[i];\n                if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                    event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                    this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                    isWithin = true;\n                    break;\n                }\n            }\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case 'Copy':\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n            if (currentPageCanvas) {\n                var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n                // update scroll top for the viewer container based on pinch zoom factor\n                var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n                var previousY = scrollValue + this.touchCenterY;\n                // tslint:disable-next-line:max-line-length\n                var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                    // tslint:disable-next-line:max-line-length\n                    previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n                this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n                // update scroll left for the viewer container based on pinch zoom factor\n                var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n                var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n                var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n                this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n            }\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                // tslint:disable-next-line:max-line-length\n                var newCanvas = this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i);\n                newCanvas.style.display = 'none';\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                var pageLink = createElement('a', { id: 'page_' + i });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n            this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        this.pdfViewerBase.navigationPane.resetThumbnailView();\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                args.cancel = true;\n            }\n            else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                var tooltipData = args.originalEvent.target.parentElement.dataset;\n                if (tooltipData && tooltipData.tooltipId) {\n                    var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                    if (tooltipElement) {\n                        tooltipElement.style.display = 'none';\n                    }\n                }\n            }\n            switch (args.originalEvent.target.id) {\n                case _this.pdfViewer.element.id + '_open':\n                case _this.pdfViewer.element.id + '_openIcon':\n                    _this.fileInputElement.click();\n                    break;\n                case _this.pdfViewer.element.id + '_download':\n                case _this.pdfViewer.element.id + '_downloadIcon':\n                    _this.pdfViewerBase.download();\n                    break;\n                case _this.pdfViewer.element.id + '_print':\n                case _this.pdfViewer.element.id + '_printIcon':\n                    if (_this.pdfViewer.printModule) {\n                        _this.pdfViewer.printModule.print();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_firstPage':\n                case _this.pdfViewer.element.id + '_firstPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToFirstPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_previousPage':\n                case _this.pdfViewer.element.id + '_previousPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToPreviousPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_nextPage':\n                case _this.pdfViewer.element.id + '_nextPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToNextPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_lastPage':\n                case _this.pdfViewer.element.id + '_lastPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToLastPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_zoomIn':\n                case _this.pdfViewer.element.id + '_zoomInIcon':\n                    _this.pdfViewer.magnificationModule.zoomIn();\n                    break;\n                case _this.pdfViewer.element.id + '_zoomOut':\n                case _this.pdfViewer.element.id + '_zoomOutIcon':\n                    _this.pdfViewer.magnificationModule.zoomOut();\n                    break;\n                case _this.pdfViewer.element.id + '_selectTool':\n                case _this.pdfViewer.element.id + '_selectToolIcon':\n                    if (!_this.isSelectionToolDisabled) {\n                        _this.pdfViewerBase.initiateTextSelectMode();\n                        _this.updateInteractionTools(true);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_handTool':\n                case _this.pdfViewer.element.id + '_handToolIcon':\n                    if (!_this.isScrollingToolDisabled) {\n                        _this.pdfViewerBase.initiatePanning();\n                        _this.updateInteractionTools(false);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_search':\n                case _this.pdfViewer.element.id + '_searchIcon':\n                    _this.textSearchButtonHandler();\n                    break;\n            }\n            // tslint:disable-next-line:max-line-length\n            if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                args.originalEvent.target.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        this.applyToolbarSettings();\n        this.initialEnableItems();\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n        }\n        else {\n            toolbar.style.display = 'none';\n            this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isVisible\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isEnable\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 16, 16);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 17, 17);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 15, 15);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        this.currentPageBox.min = 0;\n        this.currentPageBox.value = 0;\n        this.updateTotalPage();\n        this.updateToolbarItems();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewerBase.pageCount === 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, false);\n            this.toolbar.enableItems(this.printItem.parentElement, false);\n            this.updateNavigationButtons();\n            this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n            this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = true;\n            }\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            this.toolbar.enableItems(this.panItem.parentElement, false);\n            this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n        }\n        else if (this.pdfViewerBase.pageCount > 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, true);\n            this.toolbar.enableItems(this.printItem.parentElement, true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n            this.updateNavigationButtons();\n            this.updateZoomButtons();\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = false;\n            }\n            this.updateInteractionItems();\n            if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (this.currentPageBox.value === pageIndex) {\n            this.currentPageBoxElement.value = pageIndex.toString();\n        }\n        this.currentPageBox.value = pageIndex;\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.currentPageBox.min = 1;\n        }\n        this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.itemsContainer = createElement('div', { id: this.pdfViewer.element.id + '_toolbarItemsContainer' });\n        // tslint:disable-next-line:max-line-length\n        var openButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_open', this.pdfViewer.localeObj.getConstant('Open'), 'e-pv-open-document');\n        this.openDocumentItem = openButtonContainer.firstChild;\n        this.itemsContainer.appendChild(openButtonContainer);\n        this.toolbarElement.appendChild(this.itemsContainer);\n        var seperatorDiv1 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv1);\n        // tslint:disable-next-line:max-line-length\n        var firstPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_firstPage', this.pdfViewer.localeObj.getConstant('Go To First Page'), 'e-pv-first-page-navigation');\n        this.firstPageItem = firstPageContainer.firstChild;\n        this.itemsContainer.appendChild(firstPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var previousContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_previousPage', this.pdfViewer.localeObj.getConstant('Previous Page'), 'e-pv-previous-page-navigation');\n        this.previousPageItem = previousContainer.firstChild;\n        this.itemsContainer.appendChild(previousContainer);\n        // tslint:disable-next-line:max-line-length\n        var nextContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_nextPage', this.pdfViewer.localeObj.getConstant('Next Page'), 'e-pv-next-page-navigation');\n        this.nextPageItem = nextContainer.firstChild;\n        this.itemsContainer.appendChild(nextContainer);\n        // tslint:disable-next-line:max-line-length\n        var lastPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_lastPage', this.pdfViewer.localeObj.getConstant('Go To Last Page'), 'e-pv-last-page-navigation');\n        this.lastPageItem = lastPageContainer.firstChild;\n        this.itemsContainer.appendChild(lastPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var goToPageContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', this.pdfViewer.localeObj.getConstant('Page Number'), null);\n        this.itemsContainer.appendChild(goToPageContainer);\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = goToPageContainer.firstChild;\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n        // tslint:disable-next-line:max-line-length\n        var totalPageContainer = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', null, 'e-pv-total-page');\n        this.totalPageItem = totalPageContainer.firstChild;\n        this.itemsContainer.appendChild(totalPageContainer);\n        this.updateTotalPage();\n        var seperatorDiv2 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv2);\n        // tslint:disable-next-line:max-line-length\n        var zoomOutContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomOut', this.pdfViewer.localeObj.getConstant('Zoom Out'), 'e-pv-zoom-out');\n        this.zoomOutItem = zoomOutContainer.firstChild;\n        this.itemsContainer.appendChild(zoomOutContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomInContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomIn', this.pdfViewer.localeObj.getConstant('Zoom In'), 'e-pv-zoom-in');\n        this.zoomInItem = zoomInContainer.firstChild;\n        this.itemsContainer.appendChild(zoomInContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', this.pdfViewer.localeObj.getConstant('Zoom'), null);\n        zoomDropdownContainer.className = zoomDropdownContainer.className + ' e-pv-zoom-drop-down-container';\n        this.zoomDropdownItem = zoomDropdownContainer.firstChild;\n        this.itemsContainer.appendChild(zoomDropdownContainer);\n        var seperatorDiv3 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv3);\n        // tslint:disable-next-line:max-line-length\n        var selectToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_selectTool', this.pdfViewer.localeObj.getConstant('Text Selection'), 'e-pv-text-select-tool');\n        this.textSelectItem = selectToolContainer.firstChild;\n        this.itemsContainer.appendChild(selectToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var handToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_handTool', this.pdfViewer.localeObj.getConstant('Panning'), 'e-pv-pan-tool');\n        this.panItem = handToolContainer.firstChild;\n        this.itemsContainer.appendChild(handToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var searchButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_search', this.pdfViewer.localeObj.getConstant('Text Search'), 'e-pv-text-search');\n        this.textSearchItem = searchButtonContainer.firstChild;\n        this.itemsContainer.appendChild(searchButtonContainer);\n        searchButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        var downloadButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_download', this.pdfViewer.localeObj.getConstant('Download'), 'e-pv-download-document');\n        this.downloadItem = downloadButtonContainer.firstChild;\n        downloadButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        downloadButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        this.itemsContainer.appendChild(downloadButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var printButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_print', this.pdfViewer.localeObj.getConstant('Print'), 'e-pv-print-document');\n        this.printItem = printButtonContainer.firstChild;\n        printButtonContainer.style.position = 'absolute';\n        if (downloadButtonContainer !== undefined) { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - 43) + 'px';\n        }\n        else { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        } // tslint:disable-next-line:max-line-length\n        searchButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - downloadButtonContainer.clientWidth - printButtonContainer.clientWidth - 54) + 'px';\n        this.itemsContainer.appendChild(printButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.zoomDropdownItem);\n        this.toolbar = new tool({ clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup' });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        return this.toolbarElement;\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, tooltipText, className) {\n        var containerElement = createElement('div', { id: id + 'Container' });\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            containerElement.className = className + '-container e-overflow-show e-popup-text';\n            toolbarItem.className = className;\n        }\n        if (elementName === 'button' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.className = 'e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn ' + className;\n            var buttonSpan = createElement('span', { id: id + 'Icon', className: className + '-icon e-pv-icon' });\n            toolbarItem.appendChild(buttonSpan);\n        }\n        else if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        containerElement.appendChild(toolbarItem);\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n        return containerElement;\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n        this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n        this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n        this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n        this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        var navigationToolbar = document.getElementById(this.pdfViewer.element.id + '_toolbarContainer_nav');\n        var downloadButtonElement = document.getElementById(this.pdfViewer.element.id + '_downloadContainer');\n        var printButtonElement = document.getElementById(this.pdfViewer.element.id + '_printContainer');\n        var searchButtonElement = document.getElementById(this.pdfViewer.element.id + '_searchContainer');\n        if (!navigationToolbar) {\n            if (downloadButtonElement) {\n                downloadButtonElement.style.left = viewerWidth + 'px';\n                downloadButtonElement.style.position = 'absolute';\n            }\n            if (printButtonElement) {\n                if (downloadButtonElement !== null) {\n                    // calculate the print Icon left Position value\n                    printButtonElement.style.left = (viewerWidth - downloadButtonElement.clientWidth) + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n                else {\n                    printButtonElement.style.left = viewerWidth + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n            }\n            if (searchButtonElement) {\n                searchButtonElement.style.position = 'absolute';\n                if (printButtonElement !== null) {\n                    // calculate the search Icon left Position value\n                    searchButtonElement.style.left = (parseFloat(printButtonElement.style.left) - printButtonElement.clientWidth) + 'px';\n                }\n                else if (downloadButtonElement !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    searchButtonElement.style.left = (parseFloat(downloadButtonElement.style.left) - downloadButtonElement.clientWidth) + 'px';\n                }\n                else {\n                    searchButtonElement.style.left = viewerWidth + 'px';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        // tslint:disable-next-line\n        var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n        if (this.zoomDropDown.text === currentPercent) {\n            this.zoomDropDown.element.value = currentPercent;\n        }\n        if (this.zoomDropDown.index === 9) {\n            this.zoomDropDown.value = 2;\n        }\n        // tslint:disable-next-line\n        this.zoomDropDown.text = currentPercent;\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n            this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n            this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n            if (this.isTextSearchBoxDisplayed) {\n                this.selectItem(this.textSearchItem);\n                // tslint:disable-next-line:max-line-length\n                var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                searchInputElement.select();\n                searchInputElement.focus();\n            }\n            else {\n                this.deSelectItem(this.textSearchItem);\n            }\n        }\n    };\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enablePrint) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.pdfViewer.enableDownload) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.pdfViewer.enableTextSearch) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (!this.isNavigationToolVisible && this.isOpenBtnVisible && this.isDownloadBtnVisible\n            && this.isPrintBtnVisible) || (this.isOpenBtnVisible && toolbarItems.length === 1)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isNavigationToolVisible || !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible && this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n            this.showOpenOption(true);\n        }\n        else {\n            this.showOpenOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n            this.showPageNavigationTool(true);\n        }\n        else {\n            this.showPageNavigationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n            this.showMagnificationTool(true);\n        }\n        else {\n            this.showMagnificationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n            this.showSelectionTool(true);\n        }\n        else {\n            this.showSelectionTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n            this.showScrollingTool(true);\n        }\n        else {\n            this.showScrollingTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n        this.showSeparator(toolbarSettingsItems);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n * @hidden\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n * @hidden\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download': 'Download file',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    // /**\n    //  * Shows /hides the toolbar in the PdfViewer\n    //  * @param  {boolean} enableToolbar\n    //  * @returns void\n    //  */\n    // public showToolbar(enableToolbar: boolean): void {\n    //     this.toolbarModule.showToolbar(enableToolbar);\n    // }\n    // /**\n    //  * Shows /hides the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isVisible\n    //  * @returns void\n    //  */\n    // public showToolbarItem(items: ToolbarItem[], isVisible: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.showToolbarItem(items, isVisible);\n    //     }\n    // }\n    // /**\n    //  * Enables /disables the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isEnable\n    //  * @returns void\n    //  */\n    // public enableToolbarItem(items: ToolbarItem[], isEnable: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.enableToolbarItem(items, isEnable);\n    //     }\n    // }\n    // /**\n    //  * Navigate to given Page number\n    //  * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n    //  * @param  {number} pageNumber\n    //  * @returns void\n    //  */\n    // public goToPage(pageNumber: number): void {\n    //     this.navigationModule.goToPage(pageNumber);\n    // }\n    // /**\n    //  * Navigate to First page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToFirstPage(): void {\n    //     this.navigationModule.goToFirstPage();\n    // }\n    // /**\n    //  * Navigate to Previous page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToPreviousPage(): void {\n    //     this.navigationModule.goToPreviousPage();\n    // }\n    // /**\n    //  * Navigate to Next page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToNextPage(): void {\n    //     this.navigationModule.goToNextPage();\n    // }\n    // /**\n    //  * Navigate to Last page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToLastPage(): void {\n    //     this.navigationModule.goToLastPage();\n    // }\n    // /**\n    //  * Zoom the PDF document to the given zoom value\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public zoomTo(zoomValue: number): void {\n    //     if (this.viewerBase.pageCount !== 0) {\n    //         this.magnificationModule.zoomTo(zoomValue);\n    //     }\n    // }\n    // /**\n    //  * Magnifies the page to the next value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomIn(): void {\n    //     this.magnificationModule.zoomIn();\n    // }\n    // /**\n    //  * Magnifies the page to the previous value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomOut(): void {\n    //     this.magnificationModule.zoomOut();\n    // }\n    // /**\n    //  * Scales the page to fit the page in the container in the control.\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public fitToPage(): void {\n    //     this.magnificationModule.fitToPage();\n    // }\n    // /**\n    //  * Scales the page to fit the page width to the width of the container in the control.\n    //  * @returns void\n    //  */\n    // public fitToWidth(): void {\n    //     this.magnificationModule.fitToWidth();\n    // }\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document\n     * @param  {string} password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    // /**\n    //  * Display Bookmarks the PDF Document being loaded in the ejPdfViewer control\n    //  * @returns any\n    //  */\n    // // tslint:disable-next-line\n    // public getBookmarks(): any {\n    //     if (this.enableBookmark) {\n    //         // tslint:disable-next-line:max-line-length\n    //         return { bookmarks: this.bookmarkViewModule.bookmarks , bookmarksDestination: this.bookmarkViewModule.bookmarksDestination };\n    //     }\n    // }\n    // /**\n    //  * Navigate To current Bookmark Location the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public navigateBookmark(pageIndex: number, Y: number): void {\n    //     this.bookmarkViewModule.navigateTo(pageIndex, Y);\n    // }\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    // /**\n    //  * Print the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public print(): void {\n    //     if (this.enablePrint) {\n    //         this.printModule.print();\n    //     }\n    // }\n    // /**\n    //  * Searches the target text in the PDF document and highlights the occurrences in the pages\n    //  * @param  {string} searchText\n    //  * @param  {boolean} isMatchCase\n    //  * @returns void\n    //  */\n    // public searchText(searchText: string, isMatchCase: boolean): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchText(searchText, isMatchCase);\n    //     }\n    // }\n    // /**\n    //  * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchNext(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchNext();\n    //     }\n    // }\n    // /**\n    //  * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchPrevious(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchPrevious();\n    //     }\n    // }\n    // /**\n    //  * Cancels the text search of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public cancelTextSearch(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.cancelTextSearch();\n    //     }\n    // }\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.element.classList.remove('e-pdfviewer');\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        while (this.element.hasChildNodes()) {\n            this.element.removeChild(this.element.lastChild);\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'TextMarkupAnnotationOption', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.nodeClick = function (args) {\n            var bookid = Number(args.nodeData.id);\n            var proxy = _this;\n            var pageIndex = _this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n            var Y = _this.bookmarksDestination.bookMarkDestination[bookid].Y;\n            _this.goToBookmark(pageIndex, Y);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.bookmarks == null) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                else {\n                    _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n        var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n        bookmarkTitle.innerText = '${Title}';\n        bookmarkIconView.appendChild(bookmarkIcon);\n        bookmarkIconView.appendChild(bookmarkTitle);\n        // tslint:disable-next-line:max-line-length\n        var treeObj = new TreeView({\n            fields: {\n                dataSource: this.bookmarks.bookMark,\n                id: 'Id',\n                text: 'Title',\n                child: 'Child',\n                hasChildren: 'HasChild',\n            },\n            nodeTemplate: bookmarkIconView.outerHTML,\n            nodeSelected: this.nodeClick.bind(this)\n        });\n        treeObj.appendTo(this.bookmarkView);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        this.pdfViewerBase.navigationPane.disableBookmarkButton();\n        this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bounds: selectionBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBounds = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bounds: selectionBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode).childNodes[0];\n        var endElement = document.getElementById(endNode).childNodes[0];\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = [];\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds.push(this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber));\n        }\n        else {\n            bounds.push(this.normalizeBounds(range.getBoundingClientRect(), pageNumber));\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.height)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bounds = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bounds = ranges[i].bounds;\n                }\n            }\n        }\n        return bounds;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.touches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop, event.touches[0].clientX - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            if (_this.searchBtn.classList.contains('e-pv-search-icon')) {\n                _this.initiateTextSearch();\n            }\n            else if (_this.searchBtn.classList.contains('e-pv-search-close')) {\n                _this.searchInput.value = '';\n                _this.resetTextSearch();\n                _this.searchInput.focus();\n            }\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        this.searchBox.style.right = '88.3px';\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n            this.searchBox.style.right = '0px';\n            // tslint:disable-next-line\n            this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            // tslint:disable-next-line\n            this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n        }\n        else {\n            this.searchBox.style.right = '88.3px';\n            this.searchBox.style.width = '';\n            this.searchInput.style.width = '';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch();\n            }\n        }\n        else {\n            this.initiateTextSearch();\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -400 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                this.scrollToSearchStr(element, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                this.scrollToSearchStr(element_1, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                parent.scrollLeft = offsetX;\n            }\n        }\n        parent.scrollTop = offsetY;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (isEnable) {\n            this.prevSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.prevSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (isEnable) {\n            this.nextSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.nextSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (isEnable) {\n            this.searchBtn.classList.remove('e-pv-search-close');\n            this.searchBtn.classList.add('e-pv-search-icon');\n        }\n        else {\n            this.searchBtn.classList.remove('e-pv-search-icon');\n            this.searchBtn.classList.add('e-pv-search-close');\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText\n     * @param  {boolean} isMatchCase\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container' });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex <= _this.pdfViewerBase.pageCount; pageIndex++) {\n                    if (pageIndex < _this.pdfViewerBase.pageCount) {\n                        var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                        var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                        _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                    }\n                    else {\n                        _this.printWindowOpen();\n                    }\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = { pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1 };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        var printImage = request.responseText;\n        // tslint:disable-next-line\n        var pageImage = new Image();\n        pageImage.src = printImage;\n        pageImage.height = pageHeight;\n        pageImage.width = pageWidth;\n        this.printImageContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_image_container' + pageIndex });\n        if (pageHeight < pageWidth) {\n            this.printImageContainer.style.height = pageWidth + 'px';\n            pageImage.height = pageWidth;\n            this.printImageContainer.style.width = pageHeight + 'px';\n            pageImage.width = pageHeight;\n        }\n        this.printImageContainer.appendChild(pageImage);\n        this.printViewerContainer.appendChild(this.printImageContainer);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        this.frameDoc.document.write(this.printViewerContainer.outerHTML);\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        setTimeout(function () {\n            _this.iframe.contentWindow.print();\n            _this.iframe.contentWindow.focus();\n            document.body.removeChild(_this.iframe);\n        }, 200);\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["LinkAnnotation","pdfViewer","viewerBase","this","pdfViewerBase","prototype","renderHyperlinkContent","data","pageIndex","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","createElement","id","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","target","onclick","fireHyperlinkClick","window","open","document","getElementById","element","appendChild","_loop_2","this_2","undefined","destPageHeight","pageSize","destLocation","scrollValue","top","getZoomFactor","name","toString","viewerContainer","scrollTop","parseInt","className","style","background","position","left","Left","Top","width","Width","Height","height","color","modifyZindexForTextSelection","pageNumber","isAdd","pageCount","pageChildNodes","getElement","childNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","destroy","pageDiv","aElement","getElementsByTagName","index","parentNode","removeChild","getModuleName","NavigationPane","viewer","base","_this","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isBookmarkOpen","isThumbnailOpen","isNavigationPaneResized","resizeIconMouseOver","event","srcElement","cursor","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","clientX","offsetTop","clientY","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","preventDefault","maxWidth","Math","floor","outerContainerWidth","closeDiv","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","viewerWidth","clientWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","textContent","localeObj","getConstant","bookmarkPane","display","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","bookmarkViewModule","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","sideBarToolbar","mainContainer","sideBarToolbarSplitter","addEventListener","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","bind","sideBarTitleOnMouseup","thumbnailButton","attrs","disabled","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","appendTo","bookmarkButton","buttonSpan","args","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","children","enableBookmarkButton","resizeIcon","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","clear","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","sessionStorage","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","onWindowResize","navigationPane","toolbarModule","updatePageHeight","getBoundingClientRect","onToolbarResize","enableToolbar","textSearchModule","textSearchBoxOnResize","viewerContainerOnMousedown","button","detail","isIE","documentMode","textSelectionModule","isClickedOnScrollBar","clearTextSelection","pageX","pageY","contains","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","eventTarget","idStringArray","split","firePageClick","offsetX","offsetY","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","selection","getSelection","type","isCollapsed","anchorNode","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","removeAllRanges","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","contextMenuObj","close","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","viewerContainerOnPointerEnd","viewerContainerOnScroll","verticalScrollValue","pageHeight","getPageHeight","getPageTop","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","textLayer","TextLayer","initializeComponent","toolbarDiv","viewerMainContainer","tabIndex","touchAction","minHeight","intializeToolbar","createThumbnailContainer","createPrintPopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","initiatePageRender","documentData","password","documentId","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","JSON","stringify","onreadystatechange","readyState","status","currentTarget","response","parse","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","hide","initPageDiv","isAutoZoom","isInitialLoading","indexOf","createRequestForRender","pageTop","viewerHeight","clientHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","show","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","setItem","unload","updateWaitingPopup","pageCurrentRect","firstChild","bottom","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","getItem","request_1","removeItem","forEach","scrollX","scrollY","getScrollParent","scrollNodeX","scrollNodeY","focus","userAgent","appVersion","scrollTo","node","nodeName","getComputedStyle","overflowY","popupElement","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","click","closeCorruptPopup","beforeClose","inputContainer","passwordInput","applyPassword","passwordCancelClick","passwordCancel","parentElement","isInteraction","removeEventListener","fitToAuto","fitType","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","parseFloat","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","j","pageCanvas","maintainSelectionOnScroll","indexInArray","splice","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","getContext","imageData","matrix_1","image_1","Image","onload","isNaN","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","linkAnnotationModule","renderTextContent","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","bounds","renderTextContents","resizeTextContents","pageWidth","orderPageDivElements","renderPageCanvas","nextElement","insertBefore","addTextLayer","leftPosition","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","anchorElement","href","documentElement","location","padCharacter","replace","createBlobUrl","canvas","oldCanvas","getStoredData","x","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","storeObject","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","slice","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","blob","Blob","URL","createObjectURL","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","idString","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","innerHTML","whiteSpace","setStyleToTextDiv","X","Y","Bottom","setTextElementProperties","context","font","fontSize","fontFamily","contextWidth","measureText","scale","transform","resizeExcessDiv","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","startId","endId","textDivs","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","textElement","previousZoomFactor","text","textSearch","isMessagePopupOpened","copyContextMenu","Context","items","contextMenuOnBeforeOpen","select","onMenuItemSelect","Browser","isDevice","animationSettings","effect","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","right","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","pageBounds","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","getMagnifiedValue","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","pageId","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","tooltipElement","fileInputElement","printModule","print","navigationModule","updateInteractionTools","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","which","enteredValue","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","showToolbar","toolbar","toolbarElement","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","applyHideToToolbar","showSeparator","enableToolbarItem","isEnable","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableItems","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","resetToolbar","updateInteractionItems","unWireEvent","controlWidth","itemsContainer","openButtonContainer","createToolbarItem","seperatorDiv1","firstPageContainer","previousContainer","nextContainer","lastPageContainer","goToPageContainer","NumericTextBox","format","showSpinButton","totalPageContainer","seperatorDiv2","zoomOutContainer","zoomInContainer","zoomDropdownContainer","seperatorDiv3","selectToolContainer","handToolContainer","searchButtonContainer","downloadButtonContainer","printButtonContainer","ComboBox","dataSource","fields","popupHeight","showClearButton","tool","clicked","overflowMode","elementName","tooltipText","containerElement","toolbarItem","styles","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","navigationToolbar","downloadButtonElement","printButtonElement","searchButtonElement","endIndex","isHide","hideItem","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","deSelectItem","showSearchBox","searchInputElement","isTextSelect","enablePrint","enableDownload","toolbarItems","toolbarSettingsItems","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","ServerActionSettings","PdfViewer","options","defaultLocale","Cancel","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","No matches","Server error","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","enable","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","Event","NotifyPropertyChanges","Component","BookmarkView","nodeClick","bookid","Number","nodeData","bookmarksDestination","bookMarkDestination","PageIndex","goToBookmark","bookmarks","bookMark","BookmarksDestination","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","innerText","TreeView","child","hasChildren","nodeTemplate","outerHTML","nodeSelected","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","selectionRangeArray","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","zIndex","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","changedTouches","yTouch","getNodeElement","range","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","createRange","compareDocumentPosition","focusNode","Node","DOCUMENT_POSITION_PRECEDING","selectNodeContents","currentPosition","endPosition","endOffset","setStart","setEnd","rangeBounds","addRange","extend","detach","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","lowerPageIndex","higherPageIndex","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","isBackWardSelection","anchorPageId","getNodeElementFromNode","focusPageId","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","selectionObject","endNode","startNode","startOffset","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","backward","selectionBounds","getSelectionBounds","getRangeAt","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","getTextId","elementId","lastIndexOf","bound","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","contentEditable","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","resetVariables","clearAllOccurrences","inputString","searchInput","searchKeypressHandler","enableNextButton","enablePrevButton","initiateTextSearch","updateSearchInputIcon","searchClickHandler","searchBtn","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","onTextSearchClose","initSearch","highlightOthers","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","pageString","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","k","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","offsetParent","applyTextSelection","iconSpan","searchNext","searchPrevious","cancelTextSearch","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printWindowOpen","printImage","responseText","pageImage","printImageContainer","browserUserAgent","write"],"mappings":"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"}