{"version":3,"file":"ej2-pdfviewer.min.js","sources":["../../src/pdfviewer/annotation/link-annotation.js","../../src/pdfviewer/base/navigation-pane.js","../../src/pdfviewer/base/pdfviewer-base.js","../../src/pdfviewer/base/text-layer.js","../../src/pdfviewer/base/context-menu.js","../../src/pdfviewer/magnification/magnification.js","../../src/pdfviewer/navigation/page-navigation.js","../../src/pdfviewer/thumbnail-view/thumbnail-view.js","../../src/pdfviewer/toolbar/toolbar.js","../../src/pdfviewer/pdfviewer.js","../../src/pdfviewer/bookmark-view/bookmark-view.js","../../src/pdfviewer/text-selection/text-selection.js","../../src/pdfviewer/text-search/text-search.js","../../src/pdfviewer/print/print.js"],"sourcesContent":["import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageChildNodes = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).childNodes;\n            for (var i = 0; i < pageChildNodes.length; i++) {\n                var childElement = pageChildNodes[i];\n                if (childElement.tagName === 'A') {\n                    if (isAdd) {\n                        childElement.classList.add('e-pv-onselection');\n                    }\n                    else {\n                        childElement.classList.remove('e-pv-onselection');\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isBookmarkOpen = false;\n        this.isThumbnailOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY\n            ];\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            event.preventDefault();\n            if (proxy.isDown && _this.sideBarContentContainer) {\n                // prevent the sidebar from becoming too narrow, or from occupying more\n                // than half of the available viewer width.\n                var width = event.clientX + proxy.offset[0];\n                var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                if (width > maxWidth) {\n                    width = maxWidth;\n                }\n                if (width < _this.thumbnailWidthMin) {\n                    width = _this.thumbnailWidthMin;\n                }\n                proxy.sideBarResizer.style.left = width + 'px';\n                proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                proxy.sideBarContentContainer.style.width = width + 'px';\n                proxy.sideBarContent.style.width = width + 'px';\n                proxy.sideBarContentSplitter.style.width = width + 'px';\n                proxy.sideBarTitleContainer.style.width = width + 'px';\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                // tslint:disable-next-line:max-line-length\n                var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                proxy.pdfViewerBase.updateZoomValue();\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        // tslint:disable-next-line:max-line-length\n        var sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(sideBarToolbarSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content' });\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title' });\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        var resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        resizeIcon.style.position = 'absolute';\n        resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(resizeIcon);\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            // tslint:disable-next-line:max-line-length\n            proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            proxy.updateZoomValue();\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.scrollHoldTimer) {\n                    clearTimeout(_this.scrollHoldTimer);\n                    _this.scrollHoldTimer = null;\n                }\n                if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                    _this.pageViewScrollChanged(_this.currentPageNumber);\n                }\n            }\n            if (event.button === 0) {\n                // 0 is for left button.\n                var eventTarget = event.target;\n                if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                    var idStringArray = eventTarget.id.split('_');\n                    // tslint:disable-next-line\n                    _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                }\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grab';\n                    _this.viewerContainer.style.cursor = '-moz-grab';\n                    _this.viewerContainer.style.cursor = 'grab';\n                }\n            }\n            _this.isViewerMouseDown = false;\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        this.onWindowMouseUp = function (event) {\n            if (event.button === 0) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    // tslint:disable-next-line:max-line-length\n                    if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                        if (window.getSelection().anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                    }\n                    if (_this.viewerContainer.contains(event.target)) {\n                        if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                        else {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                            }\n                        }\n                    }\n                }\n            }\n            else if (event.button === 2) {\n                if (_this.viewerContainer.contains(event.target)) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (_this.isViewerMouseDown) {\n                _this.isViewerMouseDown = false;\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clear();\n                    _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1) {\n                _this.preventTouchEvent(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        this.viewerContainerOnScroll = function () {\n            var proxy = _this;\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.pdfViewer.toolbarModule.updateNavigationButtons();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container' });\n            this.viewerContainer.tabIndex = 0;\n            element.style.touchAction = 'pan-x pan-y';\n            element.style.minHeight = '500px';\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (this.pdfViewer.element.clientWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0));\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container' });\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            // this.createPasswordPopup();\n            this.createPrintPopup();\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        spinnerElement.style.height = '48px';\n        spinnerElement.style.width = '48px';\n        spinnerElement.style.transformOrigin = '24px 24px 24px';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (this.navigationPane.sideBarToolbar) {\n            this.navigationPane.clear();\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', content: '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container' });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container' });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup' });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ], close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * 2;\n                                canvas_1.width = pageWidth_1 * 2;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div' });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber);\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.left = leftPosition + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        jsonObject = { hashId: this.hashId };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    _this.downloadDocument(blobUrl);\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobUrl = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        var blob = new Blob(byteArrays, { type: contentType });\n        return URL.createObjectURL(blob);\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (!textDiv) {\n            // tslint:disable-next-line:max-line-length\n            var textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text' });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, textBounds);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, textBounds) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.bottom = bottom * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        if (textHeight > 11 && textBounds) {\n            textDiv.style.top = (parseFloat(textDiv.style.top) + 2) + 'px';\n            // tslint:disable-next-line:radix\n            textDiv.style.fontSize = (parseInt(height.toString()) * this.pdfViewerBase.getZoomFactor() - 2.6) + 'px';\n        }\n        else {\n            textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy') }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            cssClass: 'e-pv-context-menu'\n        });\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            for (var i = 0; i < bounds.length; i++) {\n                var currentBound = bounds[i];\n                if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                    event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                    this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                    isWithin = true;\n                    break;\n                }\n            }\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case 'Copy':\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n            if (currentPageCanvas) {\n                var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n                // update scroll top for the viewer container based on pinch zoom factor\n                var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n                var previousY = scrollValue + this.touchCenterY;\n                // tslint:disable-next-line:max-line-length\n                var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                    // tslint:disable-next-line:max-line-length\n                    previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n                this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n                // update scroll left for the viewer container based on pinch zoom factor\n                var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n                var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n                var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n                this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n            }\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                // tslint:disable-next-line:max-line-length\n                var newCanvas = this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i);\n                newCanvas.style.display = 'none';\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                var pageLink = createElement('a', { id: 'page_' + i });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n            this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        this.pdfViewerBase.navigationPane.resetThumbnailView();\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                args.cancel = true;\n            }\n            else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                var tooltipData = args.originalEvent.target.parentElement.dataset;\n                if (tooltipData && tooltipData.tooltipId) {\n                    var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                    if (tooltipElement) {\n                        tooltipElement.style.display = 'none';\n                    }\n                }\n            }\n            switch (args.originalEvent.target.id) {\n                case _this.pdfViewer.element.id + '_open':\n                case _this.pdfViewer.element.id + '_openIcon':\n                    _this.fileInputElement.click();\n                    break;\n                case _this.pdfViewer.element.id + '_download':\n                case _this.pdfViewer.element.id + '_downloadIcon':\n                    _this.pdfViewerBase.download();\n                    break;\n                case _this.pdfViewer.element.id + '_print':\n                case _this.pdfViewer.element.id + '_printIcon':\n                    if (_this.pdfViewer.printModule) {\n                        _this.pdfViewer.printModule.print();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_firstPage':\n                case _this.pdfViewer.element.id + '_firstPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToFirstPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_previousPage':\n                case _this.pdfViewer.element.id + '_previousPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToPreviousPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_nextPage':\n                case _this.pdfViewer.element.id + '_nextPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToNextPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_lastPage':\n                case _this.pdfViewer.element.id + '_lastPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToLastPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_zoomIn':\n                case _this.pdfViewer.element.id + '_zoomInIcon':\n                    _this.pdfViewer.magnificationModule.zoomIn();\n                    break;\n                case _this.pdfViewer.element.id + '_zoomOut':\n                case _this.pdfViewer.element.id + '_zoomOutIcon':\n                    _this.pdfViewer.magnificationModule.zoomOut();\n                    break;\n                case _this.pdfViewer.element.id + '_selectTool':\n                case _this.pdfViewer.element.id + '_selectToolIcon':\n                    if (!_this.isSelectionToolDisabled) {\n                        _this.pdfViewerBase.initiateTextSelectMode();\n                        _this.updateInteractionTools(true);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_handTool':\n                case _this.pdfViewer.element.id + '_handToolIcon':\n                    if (!_this.isScrollingToolDisabled) {\n                        _this.pdfViewerBase.initiatePanning();\n                        _this.updateInteractionTools(false);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_search':\n                case _this.pdfViewer.element.id + '_searchIcon':\n                    _this.textSearchButtonHandler();\n                    break;\n            }\n            // tslint:disable-next-line:max-line-length\n            if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                args.originalEvent.target.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        this.applyToolbarSettings();\n        this.initialEnableItems();\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n        }\n        else {\n            toolbar.style.display = 'none';\n            this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isVisible\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isEnable\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 16, 16);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 17, 17);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 15, 15);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        this.currentPageBox.min = 0;\n        this.currentPageBox.value = 0;\n        this.updateTotalPage();\n        this.updateToolbarItems();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewerBase.pageCount === 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, false);\n            this.toolbar.enableItems(this.printItem.parentElement, false);\n            this.updateNavigationButtons();\n            this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n            this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = true;\n            }\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            this.toolbar.enableItems(this.panItem.parentElement, false);\n            this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n        }\n        else if (this.pdfViewerBase.pageCount > 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, true);\n            this.toolbar.enableItems(this.printItem.parentElement, true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n            this.updateNavigationButtons();\n            this.updateZoomButtons();\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = false;\n            }\n            this.updateInteractionItems();\n            if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (this.currentPageBox.value === pageIndex) {\n            this.currentPageBoxElement.value = pageIndex.toString();\n        }\n        this.currentPageBox.value = pageIndex;\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.currentPageBox.min = 1;\n        }\n        this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.itemsContainer = createElement('div', { id: this.pdfViewer.element.id + '_toolbarItemsContainer' });\n        // tslint:disable-next-line:max-line-length\n        var openButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_open', this.pdfViewer.localeObj.getConstant('Open'), 'e-pv-open-document');\n        this.openDocumentItem = openButtonContainer.firstChild;\n        this.itemsContainer.appendChild(openButtonContainer);\n        this.toolbarElement.appendChild(this.itemsContainer);\n        var seperatorDiv1 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv1);\n        // tslint:disable-next-line:max-line-length\n        var firstPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_firstPage', this.pdfViewer.localeObj.getConstant('Go To First Page'), 'e-pv-first-page-navigation');\n        this.firstPageItem = firstPageContainer.firstChild;\n        this.itemsContainer.appendChild(firstPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var previousContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_previousPage', this.pdfViewer.localeObj.getConstant('Previous Page'), 'e-pv-previous-page-navigation');\n        this.previousPageItem = previousContainer.firstChild;\n        this.itemsContainer.appendChild(previousContainer);\n        // tslint:disable-next-line:max-line-length\n        var nextContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_nextPage', this.pdfViewer.localeObj.getConstant('Next Page'), 'e-pv-next-page-navigation');\n        this.nextPageItem = nextContainer.firstChild;\n        this.itemsContainer.appendChild(nextContainer);\n        // tslint:disable-next-line:max-line-length\n        var lastPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_lastPage', this.pdfViewer.localeObj.getConstant('Go To Last Page'), 'e-pv-last-page-navigation');\n        this.lastPageItem = lastPageContainer.firstChild;\n        this.itemsContainer.appendChild(lastPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var goToPageContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', this.pdfViewer.localeObj.getConstant('Page Number'), null);\n        this.itemsContainer.appendChild(goToPageContainer);\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = goToPageContainer.firstChild;\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n        // tslint:disable-next-line:max-line-length\n        var totalPageContainer = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', null, 'e-pv-total-page');\n        this.totalPageItem = totalPageContainer.firstChild;\n        this.itemsContainer.appendChild(totalPageContainer);\n        this.updateTotalPage();\n        var seperatorDiv2 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv2);\n        // tslint:disable-next-line:max-line-length\n        var zoomOutContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomOut', this.pdfViewer.localeObj.getConstant('Zoom Out'), 'e-pv-zoom-out');\n        this.zoomOutItem = zoomOutContainer.firstChild;\n        this.itemsContainer.appendChild(zoomOutContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomInContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomIn', this.pdfViewer.localeObj.getConstant('Zoom In'), 'e-pv-zoom-in');\n        this.zoomInItem = zoomInContainer.firstChild;\n        this.itemsContainer.appendChild(zoomInContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', this.pdfViewer.localeObj.getConstant('Zoom'), null);\n        zoomDropdownContainer.className = zoomDropdownContainer.className + ' e-pv-zoom-drop-down-container';\n        this.zoomDropdownItem = zoomDropdownContainer.firstChild;\n        this.itemsContainer.appendChild(zoomDropdownContainer);\n        var seperatorDiv3 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv3);\n        // tslint:disable-next-line:max-line-length\n        var selectToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_selectTool', this.pdfViewer.localeObj.getConstant('Text Selection'), 'e-pv-text-select-tool');\n        this.textSelectItem = selectToolContainer.firstChild;\n        this.itemsContainer.appendChild(selectToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var handToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_handTool', this.pdfViewer.localeObj.getConstant('Panning'), 'e-pv-pan-tool');\n        this.panItem = handToolContainer.firstChild;\n        this.itemsContainer.appendChild(handToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var searchButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_search', this.pdfViewer.localeObj.getConstant('Text Search'), 'e-pv-text-search');\n        this.textSearchItem = searchButtonContainer.firstChild;\n        this.itemsContainer.appendChild(searchButtonContainer);\n        searchButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        var downloadButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_download', this.pdfViewer.localeObj.getConstant('Download'), 'e-pv-download-document');\n        this.downloadItem = downloadButtonContainer.firstChild;\n        downloadButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        downloadButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        this.itemsContainer.appendChild(downloadButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var printButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_print', this.pdfViewer.localeObj.getConstant('Print'), 'e-pv-print-document');\n        this.printItem = printButtonContainer.firstChild;\n        printButtonContainer.style.position = 'absolute';\n        if (downloadButtonContainer !== undefined) { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - 43) + 'px';\n        }\n        else { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        } // tslint:disable-next-line:max-line-length\n        searchButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - downloadButtonContainer.clientWidth - printButtonContainer.clientWidth - 54) + 'px';\n        this.itemsContainer.appendChild(printButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.zoomDropdownItem);\n        this.toolbar = new tool({ clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup' });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        return this.toolbarElement;\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, tooltipText, className) {\n        var containerElement = createElement('div', { id: id + 'Container' });\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            containerElement.className = className + '-container e-overflow-show e-popup-text';\n            toolbarItem.className = className;\n        }\n        if (elementName === 'button' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.className = 'e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn ' + className;\n            var buttonSpan = createElement('span', { id: id + 'Icon', className: className + '-icon e-pv-icon' });\n            toolbarItem.appendChild(buttonSpan);\n        }\n        else if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        containerElement.appendChild(toolbarItem);\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n        return containerElement;\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n        this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n        this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n        this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n        this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        var navigationToolbar = document.getElementById(this.pdfViewer.element.id + '_toolbarContainer_nav');\n        var downloadButtonElement = document.getElementById(this.pdfViewer.element.id + '_downloadContainer');\n        var printButtonElement = document.getElementById(this.pdfViewer.element.id + '_printContainer');\n        var searchButtonElement = document.getElementById(this.pdfViewer.element.id + '_searchContainer');\n        if (!navigationToolbar) {\n            if (downloadButtonElement) {\n                downloadButtonElement.style.left = viewerWidth + 'px';\n                downloadButtonElement.style.position = 'absolute';\n            }\n            if (printButtonElement) {\n                if (downloadButtonElement !== null) {\n                    // calculate the print Icon left Position value\n                    printButtonElement.style.left = (viewerWidth - downloadButtonElement.clientWidth) + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n                else {\n                    printButtonElement.style.left = viewerWidth + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n            }\n            if (searchButtonElement) {\n                searchButtonElement.style.position = 'absolute';\n                if (printButtonElement !== null) {\n                    // calculate the search Icon left Position value\n                    searchButtonElement.style.left = (parseFloat(printButtonElement.style.left) - printButtonElement.clientWidth) + 'px';\n                }\n                else if (downloadButtonElement !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    searchButtonElement.style.left = (parseFloat(downloadButtonElement.style.left) - downloadButtonElement.clientWidth) + 'px';\n                }\n                else {\n                    searchButtonElement.style.left = viewerWidth + 'px';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        // tslint:disable-next-line\n        var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n        if (this.zoomDropDown.text === currentPercent) {\n            this.zoomDropDown.element.value = currentPercent;\n        }\n        if (this.zoomDropDown.index === 9) {\n            this.zoomDropDown.value = 2;\n        }\n        // tslint:disable-next-line\n        this.zoomDropDown.text = currentPercent;\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n            this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n            this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n            if (this.isTextSearchBoxDisplayed) {\n                this.selectItem(this.textSearchItem);\n                // tslint:disable-next-line:max-line-length\n                var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                searchInputElement.select();\n                searchInputElement.focus();\n            }\n            else {\n                this.deSelectItem(this.textSearchItem);\n            }\n        }\n    };\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enablePrint) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.pdfViewer.enableDownload) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.pdfViewer.enableTextSearch) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (!this.isNavigationToolVisible && this.isOpenBtnVisible && this.isDownloadBtnVisible\n            && this.isPrintBtnVisible) || (this.isOpenBtnVisible && toolbarItems.length === 1)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isNavigationToolVisible || !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible && this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n            this.showOpenOption(true);\n        }\n        else {\n            this.showOpenOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n            this.showPageNavigationTool(true);\n        }\n        else {\n            this.showPageNavigationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n            this.showMagnificationTool(true);\n        }\n        else {\n            this.showMagnificationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n            this.showSelectionTool(true);\n        }\n        else {\n            this.showSelectionTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n            this.showScrollingTool(true);\n        }\n        else {\n            this.showScrollingTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n        this.showSeparator(toolbarSettingsItems);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n * @hidden\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n * @hidden\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download': 'Download file',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    // /**\n    //  * Shows /hides the toolbar in the PdfViewer\n    //  * @param  {boolean} enableToolbar\n    //  * @returns void\n    //  */\n    // public showToolbar(enableToolbar: boolean): void {\n    //     this.toolbarModule.showToolbar(enableToolbar);\n    // }\n    // /**\n    //  * Shows /hides the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isVisible\n    //  * @returns void\n    //  */\n    // public showToolbarItem(items: ToolbarItem[], isVisible: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.showToolbarItem(items, isVisible);\n    //     }\n    // }\n    // /**\n    //  * Enables /disables the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isEnable\n    //  * @returns void\n    //  */\n    // public enableToolbarItem(items: ToolbarItem[], isEnable: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.enableToolbarItem(items, isEnable);\n    //     }\n    // }\n    // /**\n    //  * Navigate to given Page number\n    //  * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n    //  * @param  {number} pageNumber\n    //  * @returns void\n    //  */\n    // public goToPage(pageNumber: number): void {\n    //     this.navigationModule.goToPage(pageNumber);\n    // }\n    // /**\n    //  * Navigate to First page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToFirstPage(): void {\n    //     this.navigationModule.goToFirstPage();\n    // }\n    // /**\n    //  * Navigate to Previous page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToPreviousPage(): void {\n    //     this.navigationModule.goToPreviousPage();\n    // }\n    // /**\n    //  * Navigate to Next page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToNextPage(): void {\n    //     this.navigationModule.goToNextPage();\n    // }\n    // /**\n    //  * Navigate to Last page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToLastPage(): void {\n    //     this.navigationModule.goToLastPage();\n    // }\n    // /**\n    //  * Zoom the PDF document to the given zoom value\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public zoomTo(zoomValue: number): void {\n    //     if (this.viewerBase.pageCount !== 0) {\n    //         this.magnificationModule.zoomTo(zoomValue);\n    //     }\n    // }\n    // /**\n    //  * Magnifies the page to the next value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomIn(): void {\n    //     this.magnificationModule.zoomIn();\n    // }\n    // /**\n    //  * Magnifies the page to the previous value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomOut(): void {\n    //     this.magnificationModule.zoomOut();\n    // }\n    // /**\n    //  * Scales the page to fit the page in the container in the control.\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public fitToPage(): void {\n    //     this.magnificationModule.fitToPage();\n    // }\n    // /**\n    //  * Scales the page to fit the page width to the width of the container in the control.\n    //  * @returns void\n    //  */\n    // public fitToWidth(): void {\n    //     this.magnificationModule.fitToWidth();\n    // }\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document\n     * @param  {string} password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    // /**\n    //  * Display Bookmarks the PDF Document being loaded in the ejPdfViewer control\n    //  * @returns any\n    //  */\n    // // tslint:disable-next-line\n    // public getBookmarks(): any {\n    //     if (this.enableBookmark) {\n    //         // tslint:disable-next-line:max-line-length\n    //         return { bookmarks: this.bookmarkViewModule.bookmarks , bookmarksDestination: this.bookmarkViewModule.bookmarksDestination };\n    //     }\n    // }\n    // /**\n    //  * Navigate To current Bookmark Location the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public navigateBookmark(pageIndex: number, Y: number): void {\n    //     this.bookmarkViewModule.navigateTo(pageIndex, Y);\n    // }\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    // /**\n    //  * Print the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public print(): void {\n    //     if (this.enablePrint) {\n    //         this.printModule.print();\n    //     }\n    // }\n    // /**\n    //  * Searches the target text in the PDF document and highlights the occurrences in the pages\n    //  * @param  {string} searchText\n    //  * @param  {boolean} isMatchCase\n    //  * @returns void\n    //  */\n    // public searchText(searchText: string, isMatchCase: boolean): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchText(searchText, isMatchCase);\n    //     }\n    // }\n    // /**\n    //  * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchNext(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchNext();\n    //     }\n    // }\n    // /**\n    //  * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchPrevious(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchPrevious();\n    //     }\n    // }\n    // /**\n    //  * Cancels the text search of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public cancelTextSearch(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.cancelTextSearch();\n    //     }\n    // }\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.element.classList.remove('e-pdfviewer');\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        while (this.element.hasChildNodes()) {\n            this.element.removeChild(this.element.lastChild);\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'TextMarkupAnnotationOption', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.nodeClick = function (args) {\n            var bookid = Number(args.nodeData.id);\n            var proxy = _this;\n            var pageIndex = _this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n            var Y = _this.bookmarksDestination.bookMarkDestination[bookid].Y;\n            _this.goToBookmark(pageIndex, Y);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.bookmarks == null) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                else {\n                    _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n        var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n        bookmarkTitle.innerText = '${Title}';\n        bookmarkIconView.appendChild(bookmarkIcon);\n        bookmarkIconView.appendChild(bookmarkTitle);\n        // tslint:disable-next-line:max-line-length\n        var treeObj = new TreeView({\n            fields: {\n                dataSource: this.bookmarks.bookMark,\n                id: 'Id',\n                text: 'Title',\n                child: 'Child',\n                hasChildren: 'HasChild',\n            },\n            nodeTemplate: bookmarkIconView.outerHTML,\n            nodeSelected: this.nodeClick.bind(this)\n        });\n        treeObj.appendTo(this.bookmarkView);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        this.pdfViewerBase.navigationPane.disableBookmarkButton();\n        this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bounds: selectionBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBounds = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bounds: selectionBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode).childNodes[0];\n        var endElement = document.getElementById(endNode).childNodes[0];\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = [];\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds.push(this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber));\n        }\n        else {\n            bounds.push(this.normalizeBounds(range.getBoundingClientRect(), pageNumber));\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.height)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bounds = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bounds = ranges[i].bounds;\n                }\n            }\n        }\n        return bounds;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.touches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop, event.touches[0].clientX - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            if (_this.searchBtn.classList.contains('e-pv-search-icon')) {\n                _this.initiateTextSearch();\n            }\n            else if (_this.searchBtn.classList.contains('e-pv-search-close')) {\n                _this.searchInput.value = '';\n                _this.resetTextSearch();\n                _this.searchInput.focus();\n            }\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        this.searchBox.style.right = '88.3px';\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n            this.searchBox.style.right = '0px';\n            // tslint:disable-next-line\n            this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            // tslint:disable-next-line\n            this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n        }\n        else {\n            this.searchBox.style.right = '88.3px';\n            this.searchBox.style.width = '';\n            this.searchInput.style.width = '';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch();\n            }\n        }\n        else {\n            this.initiateTextSearch();\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -400 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                this.scrollToSearchStr(element, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                this.scrollToSearchStr(element_1, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                parent.scrollLeft = offsetX;\n            }\n        }\n        parent.scrollTop = offsetY;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (isEnable) {\n            this.prevSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.prevSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (isEnable) {\n            this.nextSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.nextSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (isEnable) {\n            this.searchBtn.classList.remove('e-pv-search-close');\n            this.searchBtn.classList.add('e-pv-search-icon');\n        }\n        else {\n            this.searchBtn.classList.remove('e-pv-search-icon');\n            this.searchBtn.classList.add('e-pv-search-close');\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText\n     * @param  {boolean} isMatchCase\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container' });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex <= _this.pdfViewerBase.pageCount; pageIndex++) {\n                    if (pageIndex < _this.pdfViewerBase.pageCount) {\n                        var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                        var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                        _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                    }\n                    else {\n                        _this.printWindowOpen();\n                    }\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = { pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1 };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        var printImage = request.responseText;\n        // tslint:disable-next-line\n        var pageImage = new Image();\n        pageImage.src = printImage;\n        pageImage.height = pageHeight;\n        pageImage.width = pageWidth;\n        this.printImageContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_image_container' + pageIndex });\n        if (pageHeight < pageWidth) {\n            this.printImageContainer.style.height = pageWidth + 'px';\n            pageImage.height = pageWidth;\n            this.printImageContainer.style.width = pageHeight + 'px';\n            pageImage.width = pageHeight;\n        }\n        this.printImageContainer.appendChild(pageImage);\n        this.printViewerContainer.appendChild(this.printImageContainer);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        this.frameDoc.document.write(this.printViewerContainer.outerHTML);\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        setTimeout(function () {\n            _this.iframe.contentWindow.print();\n            _this.iframe.contentWindow.focus();\n            document.body.removeChild(_this.iframe);\n        }, 200);\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["LinkAnnotation","pdfViewer","viewerBase","this","pdfViewerBase","prototype","renderHyperlinkContent","data","pageIndex","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","this_1","i","aTag","createElement","id","rect","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","target","onclick","fireHyperlinkClick","window","open","document","getElementById","element","appendChild","this_2","undefined","destPageHeight","pageSize","destLocation","scrollValue","top","getZoomFactor","name","toString","viewerContainer","scrollTop","parseInt","className","style","background","position","left","Left","Top","width","Width","Height","height","color","modifyZindexForTextSelection","pageNumber","isAdd","pageCount","pageChildNodes","getElement","childNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","destroy","pageDiv","aElement","getElementsByTagName","index","parentNode","removeChild","getModuleName","NavigationPane","viewer","base","_this","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isBookmarkOpen","isThumbnailOpen","isNavigationPaneResized","resizeIconMouseOver","event","srcElement","cursor","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","clientX","offsetTop","clientY","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","preventDefault","maxWidth","Math","floor","outerContainerWidth","closeDiv","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","viewerWidth","clientWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","textContent","localeObj","getConstant","bookmarkPane","display","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","bookmarkViewModule","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","sideBarToolbar","mainContainer","sideBarToolbarSplitter","addEventListener","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","bind","sideBarTitleOnMouseup","thumbnailButton","attrs","disabled","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","appendTo","bookmarkButton","buttonSpan","args","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","children","enableBookmarkButton","resizeIcon","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","clear","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","sessionStorage","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","onWindowResize","navigationPane","toolbarModule","updatePageHeight","getBoundingClientRect","onToolbarResize","enableToolbar","textSearchModule","textSearchBoxOnResize","viewerContainerOnMousedown","button","detail","isIE","documentMode","textSelectionModule","isClickedOnScrollBar","clearTextSelection","pageX","pageY","contains","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","eventTarget","idStringArray","split","firePageClick","offsetX","offsetY","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","selection","getSelection","type","isCollapsed","anchorNode","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","removeAllRanges","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","contextMenuObj","close","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","viewerContainerOnPointerEnd","viewerContainerOnScroll","verticalScrollValue","pageHeight","getPageHeight","getPageTop","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","textLayer","TextLayer","initializeComponent","toolbarDiv","viewerMainContainer","tabIndex","touchAction","minHeight","intializeToolbar","createThumbnailContainer","createPrintPopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","initiatePageRender","documentData","password","documentId","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","JSON","stringify","onreadystatechange","readyState","status","currentTarget","response","parse","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","hide","initPageDiv","isAutoZoom","isInitialLoading","indexOf","createRequestForRender","pageTop","viewerHeight","clientHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","show","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","setItem","unload","updateWaitingPopup","pageCurrentRect","firstChild","bottom","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","getItem","request_1","removeItem","forEach","scrollX","scrollY","getScrollParent","scrollNodeX","scrollNodeY","focus","userAgent","appVersion","scrollTo","node","nodeName","getComputedStyle","overflowY","popupElement","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","click","closeCorruptPopup","beforeClose","inputContainer","passwordInput","applyPassword","passwordCancelClick","passwordCancel","parentElement","isInteraction","removeEventListener","fitToAuto","fitType","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","parseFloat","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","j","pageCanvas","maintainSelectionOnScroll","indexInArray","splice","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","getContext","imageData","matrix_1","image_1","Image","onload","isNaN","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","linkAnnotationModule","renderTextContent","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","bounds","renderTextContents","resizeTextContents","pageWidth","orderPageDivElements","renderPageCanvas","nextElement","insertBefore","addTextLayer","leftPosition","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","anchorElement","href","documentElement","location","padCharacter","replace","createBlobUrl","canvas","oldCanvas","getStoredData","x","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","storeObject","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","slice","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","blob","Blob","URL","createObjectURL","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","idString","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","innerHTML","whiteSpace","setStyleToTextDiv","X","Y","Bottom","setTextElementProperties","context","font","fontSize","fontFamily","contextWidth","measureText","scale","transform","resizeExcessDiv","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","startId","endId","textDivs","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","textElement","previousZoomFactor","text","textSearch","isMessagePopupOpened","copyContextMenu","Context","items","contextMenuOnBeforeOpen","select","onMenuItemSelect","Browser","isDevice","animationSettings","effect","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","right","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","pageBounds","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","getMagnifiedValue","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","pageId","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","tooltipElement","fileInputElement","printModule","print","navigationModule","updateInteractionTools","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","which","enteredValue","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","showToolbar","toolbar","toolbarElement","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","applyHideToToolbar","showSeparator","enableToolbarItem","isEnable","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableItems","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","resetToolbar","updateInteractionItems","unWireEvent","controlWidth","itemsContainer","openButtonContainer","createToolbarItem","seperatorDiv1","firstPageContainer","previousContainer","nextContainer","lastPageContainer","goToPageContainer","NumericTextBox","format","showSpinButton","totalPageContainer","seperatorDiv2","zoomOutContainer","zoomInContainer","zoomDropdownContainer","seperatorDiv3","selectToolContainer","handToolContainer","searchButtonContainer","downloadButtonContainer","printButtonContainer","ComboBox","dataSource","fields","popupHeight","showClearButton","tool","clicked","overflowMode","elementName","tooltipText","containerElement","toolbarItem","styles","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","navigationToolbar","downloadButtonElement","printButtonElement","searchButtonElement","endIndex","isHide","hideItem","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","deSelectItem","showSearchBox","searchInputElement","isTextSelect","enablePrint","enableDownload","toolbarItems","toolbarSettingsItems","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","ServerActionSettings","PdfViewer","options","defaultLocale","Cancel","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","No matches","Server error","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","enable","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","Event","NotifyPropertyChanges","Component","BookmarkView","nodeClick","bookid","Number","nodeData","bookmarksDestination","bookMarkDestination","PageIndex","goToBookmark","bookmarks","bookMark","BookmarksDestination","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","innerText","TreeView","child","hasChildren","nodeTemplate","outerHTML","nodeSelected","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","selectionRangeArray","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","zIndex","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","changedTouches","yTouch","getNodeElement","range","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","createRange","compareDocumentPosition","focusNode","Node","DOCUMENT_POSITION_PRECEDING","selectNodeContents","currentPosition","endPosition","endOffset","setStart","setEnd","rangeBounds","addRange","extend","detach","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","lowerPageIndex","higherPageIndex","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","isBackWardSelection","anchorPageId","getNodeElementFromNode","focusPageId","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","selectionObject","endNode","startNode","startOffset","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","backward","selectionBounds","getSelectionBounds","getRangeAt","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","getTextId","elementId","lastIndexOf","bound","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","contentEditable","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","resetVariables","clearAllOccurrences","inputString","searchInput","searchKeypressHandler","enableNextButton","enablePrevButton","initiateTextSearch","updateSearchInputIcon","searchClickHandler","searchBtn","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","onTextSearchClose","initSearch","highlightOthers","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","pageString","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","k","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","offsetParent","applyTextSelection","iconSpan","searchNext","searchPrevious","cancelTextSearch","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printWindowOpen","printImage","responseText","pageImage","printImageContainer","browserUserAgent","write"],"mappings":"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"}